<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Predicting Performance Using Baseball Data â€” AIO: Bridging the Gap Between Data Science and IO</title>
	<meta name="description" content="Title: Predicting Performance Using Baseball Data; Date: 2019-11-22; Author: N. Koenig">
	<meta name="author" content="N. Koenig">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
		<![endif]-->
	<link href="/theme/css/ipython.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="//maxcdn.bootstrapcdn.com/bootswatch/3.2.0/simplex/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/css/local.css" rel="stylesheet">
	<link href="/theme/css/pygments.css" rel="stylesheet">
</head>
<body>
<div class="container">
	<div class="page-header">
		<h1><a href="/">AIO: Bridging the Gap Between Data Science and IO</a>
			<br>	</div>
	<div class="row">
		<div class="col-md-8 col-md-offset-2">
<div class="article" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="text-center article-header">
		<h1 itemprop="name headline" class="article-title">Predicting Performance Using Baseball Data</h1>
		<span itemprop="author" itemscope itemtype="http://schema.org/Person">
			<h4 itemprop="name">N. Koenig</h4>
		</span>
		<time datetime="2019-11-22T12:30:00-06:00" itemprop="datePublished">Fri 22 November 2019</time>
	</div>
	<div>
		Category:
		<span itemprop="articleSection">
			<a href="/category/data-science.html" rel="category">data science</a>
		</span>
	</div>
 
	<div>
		Tags:
		<span itemprop="keywords">
			<a href="/tag/machine-learning.html" rel="tag">machine learning</a>
		</span>
		<span itemprop="keywords">
			<a href="/tag/baseball.html" rel="tag">baseball</a>
		</span>
		<span itemprop="keywords">
			<a href="/tag/performance.html" rel="tag">performance</a>
		</span>
	</div>
	<div itemprop="articleBody" class="article-body"><style type="text/css">/*!
*
* IPython notebook
*
*/
/* CSS font colors for translated ANSI colors. */
.ansibold {
  font-weight: bold;
}
/* use dark versions for foreground, to improve visibility */
.ansiblack {
  color: black;
}
.ansired {
  color: darkred;
}
.ansigreen {
  color: darkgreen;
}
.ansiyellow {
  color: #c4a000;
}
.ansiblue {
  color: darkblue;
}
.ansipurple {
  color: darkviolet;
}
.ansicyan {
  color: steelblue;
}
.ansigray {
  color: gray;
}
/* and light for background, for the same reason */
.ansibgblack {
  background-color: black;
}
.ansibgred {
  background-color: red;
}
.ansibggreen {
  background-color: green;
}
.ansibgyellow {
  background-color: yellow;
}
.ansibgblue {
  background-color: blue;
}
.ansibgpurple {
  background-color: magenta;
}
.ansibgcyan {
  background-color: cyan;
}
.ansibggray {
  background-color: gray;
}
div.cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  border-radius: 2px;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
  border-width: 1px;
  border-style: solid;
  border-color: transparent;
  width: 100%;
  padding: 5px;
  /* This acts as a spacer between cells, that is outside the border */
  margin: 0px;
  outline: none;
  border-left-width: 1px;
  padding-left: 5px;
  background: linear-gradient(to right, transparent -40px, transparent 1px, transparent 1px, transparent 100%);
}
div.cell.jupyter-soft-selected {
  border-left-color: #90CAF9;
  border-left-color: #E3F2FD;
  border-left-width: 1px;
  padding-left: 5px;
  border-right-color: #E3F2FD;
  border-right-width: 1px;
  background: #E3F2FD;
}
@media print {
  div.cell.jupyter-soft-selected {
    border-color: transparent;
  }
}
div.cell.selected {
  border-color: #ababab;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 5px, transparent 5px, transparent 100%);
}
@media print {
  div.cell.selected {
    border-color: transparent;
  }
}
div.cell.selected.jupyter-soft-selected {
  border-left-width: 0;
  padding-left: 6px;
  background: linear-gradient(to right, #42A5F5 -40px, #42A5F5 7px, #E3F2FD 7px, #E3F2FD 100%);
}
.edit_mode div.cell.selected {
  border-color: #66BB6A;
  border-left-width: 0px;
  padding-left: 6px;
  background: linear-gradient(to right, #66BB6A -40px, #66BB6A 5px, transparent 5px, transparent 100%);
}
@media print {
  .edit_mode div.cell.selected {
    border-color: transparent;
  }
}
.prompt {
  /* This needs to be wide enough for 3 digit prompt numbers: In[100]: */
  min-width: 14ex;
  /* This padding is tuned to match the padding on the CodeMirror editor. */
  padding: 0.4em;
  margin: 0px;
  font-family: monospace;
  text-align: right;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
  /* Don't highlight prompt number selection */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  /* Use default cursor */
  cursor: default;
}
@media (max-width: 540px) {
  .prompt {
    text-align: left;
  }
}
div.inner_cell {
  min-width: 0;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_area {
  border: 1px solid #cfcfcf;
  border-radius: 2px;
  background: #f7f7f7;
  line-height: 1.21429em;
}
/* This is needed so that empty prompt areas can collapse to zero height when there
   is no content in the output_subarea and the prompt. The main purpose of this is
   to make sure that empty JavaScript output_subareas have no height. */
div.prompt:empty {
  padding-top: 0;
  padding-bottom: 0;
}
div.unrecognized_cell {
  padding: 5px 5px 5px 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.unrecognized_cell .inner_cell {
  border-radius: 2px;
  padding: 5px;
  font-weight: bold;
  color: red;
  border: 1px solid #cfcfcf;
  background: #eaeaea;
}
div.unrecognized_cell .inner_cell a {
  color: inherit;
  text-decoration: none;
}
div.unrecognized_cell .inner_cell a:hover {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 540px) {
  div.unrecognized_cell > div.prompt {
    display: none;
  }
}
div.code_cell {
  /* avoid page breaking on code cells when printing */
}
@media print {
  div.code_cell {
    page-break-inside: avoid;
  }
}
/* any special styling for code cells that are currently running goes here */
div.input {
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.input {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
/* input_area and input_prompt must match in top border and margin for alignment */
div.input_prompt {
  color: #303F9F;
  border-top: 1px solid transparent;
}
div.input_area > div.highlight {
  margin: 0.4em;
  border: none;
  padding: 0px;
  background-color: transparent;
}
div.input_area > div.highlight > pre {
  margin: 0px;
  border: none;
  padding: 0px;
  background-color: transparent;
}
/* The following gets added to the <head> if it is detected that the user has a
 * monospace font with inconsistent normal/bold/italic height.  See
 * notebookmain.js.  Such fonts will have keywords vertically offset with
 * respect to the rest of the text.  The user should select a better font.
 * See: https://github.com/ipython/ipython/issues/1503
 *
 * .CodeMirror span {
 *      vertical-align: bottom;
 * }
 */
.CodeMirror {
  line-height: 1.21429em;
  /* Changed from 1em to our global default */
  font-size: 14px;
  height: auto;
  /* Changed to auto to autogrow */
  background: none;
  /* Changed from white to allow our bg to show through */
}
.CodeMirror-scroll {
  /*  The CodeMirror docs are a bit fuzzy on if overflow-y should be hidden or visible.*/
  /*  We have found that if it is visible, vertical scrollbars appear with font size changes.*/
  overflow-y: hidden;
  overflow-x: auto;
}
.CodeMirror-lines {
  /* In CM2, this used to be 0.4em, but in CM3 it went to 4px. We need the em value because */
  /* we have set a different line-height and want this to scale with that. */
  padding: 0.4em;
}
.CodeMirror-linenumber {
  padding: 0 8px 0 4px;
}
.CodeMirror-gutters {
  border-bottom-left-radius: 2px;
  border-top-left-radius: 2px;
}
.CodeMirror pre {
  /* In CM3 this went to 4px from 0 in CM2. We need the 0 value because of how we size */
  /* .CodeMirror-lines */
  padding: 0;
  border: 0;
  border-radius: 0;
}
/*

Original style from softwaremaniacs.org (c) Ivan Sagalaev <Maniac@SoftwareManiacs.Org>
Adapted from GitHub theme

*/
.highlight-base {
  color: #000;
}
.highlight-variable {
  color: #000;
}
.highlight-variable-2 {
  color: #1a1a1a;
}
.highlight-variable-3 {
  color: #333333;
}
.highlight-string {
  color: #BA2121;
}
.highlight-comment {
  color: #408080;
  font-style: italic;
}
.highlight-number {
  color: #080;
}
.highlight-atom {
  color: #88F;
}
.highlight-keyword {
  color: #008000;
  font-weight: bold;
}
.highlight-builtin {
  color: #008000;
}
.highlight-error {
  color: #f00;
}
.highlight-operator {
  color: #AA22FF;
  font-weight: bold;
}
.highlight-meta {
  color: #AA22FF;
}
/* previously not defined, copying from default codemirror */
.highlight-def {
  color: #00f;
}
.highlight-string-2 {
  color: #f50;
}
.highlight-qualifier {
  color: #555;
}
.highlight-bracket {
  color: #997;
}
.highlight-tag {
  color: #170;
}
.highlight-attribute {
  color: #00c;
}
.highlight-header {
  color: blue;
}
.highlight-quote {
  color: #090;
}
.highlight-link {
  color: #00c;
}
/* apply the same style to codemirror */
.cm-s-ipython span.cm-keyword {
  color: #008000;
  font-weight: bold;
}
.cm-s-ipython span.cm-atom {
  color: #88F;
}
.cm-s-ipython span.cm-number {
  color: #080;
}
.cm-s-ipython span.cm-def {
  color: #00f;
}
.cm-s-ipython span.cm-variable {
  color: #000;
}
.cm-s-ipython span.cm-operator {
  color: #AA22FF;
  font-weight: bold;
}
.cm-s-ipython span.cm-variable-2 {
  color: #1a1a1a;
}
.cm-s-ipython span.cm-variable-3 {
  color: #333333;
}
.cm-s-ipython span.cm-comment {
  color: #408080;
  font-style: italic;
}
.cm-s-ipython span.cm-string {
  color: #BA2121;
}
.cm-s-ipython span.cm-string-2 {
  color: #f50;
}
.cm-s-ipython span.cm-meta {
  color: #AA22FF;
}
.cm-s-ipython span.cm-qualifier {
  color: #555;
}
.cm-s-ipython span.cm-builtin {
  color: #008000;
}
.cm-s-ipython span.cm-bracket {
  color: #997;
}
.cm-s-ipython span.cm-tag {
  color: #170;
}
.cm-s-ipython span.cm-attribute {
  color: #00c;
}
.cm-s-ipython span.cm-header {
  color: blue;
}
.cm-s-ipython span.cm-quote {
  color: #090;
}
.cm-s-ipython span.cm-link {
  color: #00c;
}
.cm-s-ipython span.cm-error {
  color: #f00;
}
.cm-s-ipython span.cm-tab {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAMCAYAAAAkuj5RAAAAAXNSR0IArs4c6QAAAGFJREFUSMft1LsRQFAQheHPowAKoACx3IgEKtaEHujDjORSgWTH/ZOdnZOcM/sgk/kFFWY0qV8foQwS4MKBCS3qR6ixBJvElOobYAtivseIE120FaowJPN75GMu8j/LfMwNjh4HUpwg4LUAAAAASUVORK5CYII=);
  background-position: right;
  background-repeat: no-repeat;
}
div.output_wrapper {
  /* this position must be relative to enable descendents to be absolute within it */
  position: relative;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
  z-index: 1;
}
/* class for the output area when it should be height-limited */
div.output_scroll {
  /* ideally, this would be max-height, but FF barfs all over that */
  height: 24em;
  /* FF needs this *and the wrapper* to specify full width, or it will shrinkwrap */
  width: 100%;
  overflow: auto;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.8);
  display: block;
}
/* output div while it is collapsed */
div.output_collapsed {
  margin: 0px;
  padding: 0px;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
div.out_prompt_overlay {
  height: 100%;
  padding: 0px 0.4em;
  position: absolute;
  border-radius: 2px;
}
div.out_prompt_overlay:hover {
  /* use inner shadow to get border that is computed the same on WebKit/FF */
  -webkit-box-shadow: inset 0 0 1px #000;
  box-shadow: inset 0 0 1px #000;
  background: rgba(240, 240, 240, 0.5);
}
div.output_prompt {
  color: #D84315;
}
/* This class is the outer container of all output sections. */
div.output_area {
  padding: 0px;
  page-break-inside: avoid;
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
div.output_area .MathJax_Display {
  text-align: left !important;
}
div.output_area 
div.output_area 
div.output_area img,
div.output_area svg {
  max-width: 100%;
  height: auto;
}
div.output_area img.unconfined,
div.output_area svg.unconfined {
  max-width: none;
}
/* This is needed to protect the pre formating from global settings such
   as that of bootstrap */
.output {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: vertical;
  -moz-box-align: stretch;
  display: box;
  box-orient: vertical;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: column;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.output_area {
    /* Old browsers */
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-box-align: stretch;
    display: -moz-box;
    -moz-box-orient: vertical;
    -moz-box-align: stretch;
    display: box;
    box-orient: vertical;
    box-align: stretch;
    /* Modern browsers */
    display: flex;
    flex-direction: column;
    align-items: stretch;
  }
}
div.output_area pre {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  color: black;
  background-color: transparent;
  border-radius: 0;
}
/* This class is for the output subarea inside the output_area and after
   the prompt div. */
div.output_subarea {
  overflow-x: auto;
  padding: 0.4em;
  /* Old browsers */
  -webkit-box-flex: 1;
  -moz-box-flex: 1;
  box-flex: 1;
  /* Modern browsers */
  flex: 1;
  max-width: calc(100% - 14ex);
}
div.output_scroll div.output_subarea {
  overflow-x: visible;
}
/* The rest of the output_* classes are for special styling of the different
   output types */
/* all text output has this class: */
div.output_text {
  text-align: left;
  color: #000;
  /* This has to match that of the the CodeMirror class line-height below */
  line-height: 1.21429em;
}
/* stdout/stderr are 'text' as well as 'stream', but execute_result/error are *not* streams */
div.output_stderr {
  background: #fdd;
  /* very light red background for stderr */
}
div.output_latex {
  text-align: left;
}
/* Empty output_javascript divs should have no height */
div.output_javascript:empty {
  padding: 0;
}
.js-error {
  color: darkred;
}
/* raw_input styles */
div.raw_input_container {
  line-height: 1.21429em;
  padding-top: 5px;
}
pre.raw_input_prompt {
  /* nothing needed here. */
}
input.raw_input {
  font-family: monospace;
  font-size: inherit;
  color: inherit;
  width: auto;
  /* make sure input baseline aligns with prompt */
  vertical-align: baseline;
  /* padding + margin = 0.5em between prompt and cursor */
  padding: 0em 0.25em;
  margin: 0em 0.25em;
}
input.raw_input:focus {
  box-shadow: none;
}
p.p-space {
  margin-bottom: 10px;
}
div.output_unrecognized {
  padding: 5px;
  font-weight: bold;
  color: red;
}
div.output_unrecognized a {
  color: inherit;
  text-decoration: none;
}
div.output_unrecognized a:hover {
  color: inherit;
  text-decoration: none;
}
.rendered_html {
  color: #000;
  /* any extras will just be numbers: */
}



.rendered_html :link {
  text-decoration: underline;
}
.rendered_html :visited {
  text-decoration: underline;
}






.rendered_html h1:first-child {
  margin-top: 0.538em;
}
.rendered_html h2:first-child {
  margin-top: 0.636em;
}
.rendered_html h3:first-child {
  margin-top: 0.777em;
}
.rendered_html h4:first-child {
  margin-top: 1em;
}
.rendered_html h5:first-child {
  margin-top: 1em;
}
.rendered_html h6:first-child {
  margin-top: 1em;
}








.rendered_html * + ul {
  margin-top: 1em;
}
.rendered_html * + ol {
  margin-top: 1em;
}


.rendered_html pre,



.rendered_html tr,
.rendered_html th,

.rendered_html td,


.rendered_html * + table {
  margin-top: 1em;
}

.rendered_html * + p {
  margin-top: 1em;
}

.rendered_html * + img {
  margin-top: 1em;
}
.rendered_html img,

.rendered_html img.unconfined,

div.text_cell {
  /* Old browsers */
  display: -webkit-box;
  -webkit-box-orient: horizontal;
  -webkit-box-align: stretch;
  display: -moz-box;
  -moz-box-orient: horizontal;
  -moz-box-align: stretch;
  display: box;
  box-orient: horizontal;
  box-align: stretch;
  /* Modern browsers */
  display: flex;
  flex-direction: row;
  align-items: stretch;
}
@media (max-width: 540px) {
  div.text_cell > div.prompt {
    display: none;
  }
}
div.text_cell_render {
  /*font-family: "Helvetica Neue", Arial, Helvetica, Geneva, sans-serif;*/
  outline: none;
  resize: none;
  width: inherit;
  border-style: none;
  padding: 0.5em 0.5em 0.5em 0.4em;
  color: #000;
  box-sizing: border-box;
  -moz-box-sizing: border-box;
  -webkit-box-sizing: border-box;
}
a.anchor-link:link {
  text-decoration: none;
  padding: 0px 20px;
  visibility: hidden;
}
h1:hover .anchor-link,
h2:hover .anchor-link,
h3:hover .anchor-link,
h4:hover .anchor-link,
h5:hover .anchor-link,
h6:hover .anchor-link {
  visibility: visible;
}
.text_cell.rendered .input_area {
  display: none;
}
.text_cell.rendered 
.text_cell.unrendered .text_cell_render {
  display: none;
}
.cm-header-1,
.cm-header-2,
.cm-header-3,
.cm-header-4,
.cm-header-5,
.cm-header-6 {
  font-weight: bold;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}
.cm-header-1 {
  font-size: 185.7%;
}
.cm-header-2 {
  font-size: 157.1%;
}
.cm-header-3 {
  font-size: 128.6%;
}
.cm-header-4 {
  font-size: 110%;
}
.cm-header-5 {
  font-size: 100%;
  font-style: italic;
}
.cm-header-6 {
  font-size: 100%;
  font-style: italic;
}
</style>
<style type="text/css">.highlight .hll { background-color: #ffffcc }
.highlight  { background: #f8f8f8; }
.highlight .c { color: #408080; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #408080; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #408080; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #BC7A00 } /* Comment.Preproc */
.highlight .cpf { color: #408080; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #408080; font-style: italic } /* Comment.Single */
.highlight .cs { color: #408080; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .gr { color: #FF0000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #00A000 } /* Generic.Inserted */
.highlight .go { color: #888888 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #7D9029 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #999999; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #D2413A; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #A0A000 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #BB6622; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #BB6688; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #BB6688 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style>
<style type="text/css">
/* Temporary definitions which will become obsolete with Notebook release 5.0 */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-bold { font-weight: bold; }
</style>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Predicting-Job-Performance">Predicting Job Performance<a class="anchor-link" href="#Predicting-Job-Performance">&#182;</a></h1><h3 id="Using-Baseball-Data">Using Baseball Data<a class="anchor-link" href="#Using-Baseball-Data">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://i.imgur.com/D1mIWTk.jpg" alt="Imgur"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>As I/O Psychologists one of our main functions is to predict job performance. Often we are in search of what job performance means and it means different things for different roles, but often we can get at a decent understanding of what behaviors and competencies differentiate good and poor performers. Our goal is to then use available data to predict whether or not the employee/candidate will be a good performer or a bad performer.</p>
<p>We can look at the game of baseball as a microcosm for this. A hit is good and an out is bad. For simplicity sake we will treat all hits as equal (single, double, triple, homerun) and an out from a ball in play is bad.</p>
<p>So, if we could get this data, how would we structure it to see if we could predict it, and...can we predict it?</p>
<p>introducing <a href="https://en.wikipedia.org/wiki/Statcast">statcast</a>....it's powered by AWS :) This new dataset allows us to actually examine parts of the game that are closer to behaviors. It has an amazing amount of pitch data, but it also has things like launch angle, exit velocity, whether or not there was a shift, where the ball was hit on the field, etc. All things that are important to understanding whether or not the ball in play resulted in a hit or an out.</p>
<p><img src="https://i.imgur.com/yLhwuYt.jpg" alt="img"></p>
<p>first thing we need to do is pip install pybaseball, I've already done so, so I'm going to comment it out. Then we will import our needed packages.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="ch">#!pip install pybaseball</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[64]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">pybaseball</span> <span class="k">import</span> <span class="n">statcast</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After that let's download the 2019 seasons data. Pybaseball, makes downloading the statcast data about as easy as possible. You can look at <a href="https://baseballsavant.mlb.com/csv-docs">this</a> to get an idea of the variables/features available. These are the variables I thought might be useful:</p>
<ul>
<li>launch angle</li>
<li>launch speed</li>
<li>hc_y</li>
<li>hc_x</li>
<li>if_fielding_assignment (need to dummy code)</li>
<li>of_fielding_assignment (need to dummy code)</li>
<li>outs_when_up</li>
<li>home_team (need to dummy code)</li>
<li>stand (recode)</li>
<li>hit_location</li>
<li>p_throws (recode)</li>
</ul>
<p>hc_y/hc_x is the location the ball lands. if/of_fielding_assignment is whether there was a shift in the infield or outfield, outs when up could impact how easily a force out is applied, home team allows us to account for park factors, stand is whether the batter is a lefty or a righty, hit location is the position of the first player to touch the ball and p_throws is the hand of the pitcher. that should be a good start.</p>
<p>This simple query allows us to download all data from a specific time period. I chose the length of the 2019 MLB regular season for the purposes of this.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hitter_stats</span> <span class="o">=</span> <span class="n">statcast</span><span class="p">(</span><span class="s1">&#39;2019-03-31&#39;</span><span class="p">,</span><span class="s1">&#39;2019-10-04&#39;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>This is a large query, it may take a moment to complete
Completed sub-query from 2019-03-31 to 2019-04-05
Completed sub-query from 2019-04-06 to 2019-04-11
Completed sub-query from 2019-04-12 to 2019-04-17
Completed sub-query from 2019-04-18 to 2019-04-23
Completed sub-query from 2019-04-24 to 2019-04-29
Completed sub-query from 2019-04-30 to 2019-05-05
Completed sub-query from 2019-05-06 to 2019-05-11
Completed sub-query from 2019-05-12 to 2019-05-17
Completed sub-query from 2019-05-18 to 2019-05-23
Completed sub-query from 2019-05-24 to 2019-05-29
Completed sub-query from 2019-05-30 to 2019-06-04
Completed sub-query from 2019-06-05 to 2019-06-10
Completed sub-query from 2019-06-11 to 2019-06-16
Completed sub-query from 2019-06-17 to 2019-06-22
Completed sub-query from 2019-06-23 to 2019-06-28
Completed sub-query from 2019-06-29 to 2019-07-04
Completed sub-query from 2019-07-05 to 2019-07-10
Completed sub-query from 2019-07-11 to 2019-07-16
Completed sub-query from 2019-07-17 to 2019-07-22
Completed sub-query from 2019-07-23 to 2019-07-28
Completed sub-query from 2019-07-29 to 2019-08-03
Completed sub-query from 2019-08-04 to 2019-08-09
Completed sub-query from 2019-08-10 to 2019-08-15
Completed sub-query from 2019-08-16 to 2019-08-21
Completed sub-query from 2019-08-22 to 2019-08-27
Completed sub-query from 2019-08-28 to 2019-09-02
Completed sub-query from 2019-09-03 to 2019-09-08
Completed sub-query from 2019-09-09 to 2019-09-14
Completed sub-query from 2019-09-15 to 2019-09-20
Completed sub-query from 2019-09-21 to 2019-09-26
Completed sub-query from 2019-09-27 to 2019-10-02
Completed sub-query from 2019-10-03 to 2019-10-04
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's first take a look at the data we have.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">hitter_stats</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[3]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>723346</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[151]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">hitter_stats</span><span class="p">[</span><span class="s1">&#39;player_name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[151]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>829</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So there are over 723k pitches thrown in the 2019 season by 829 different pitchers.</p>
<p>Let's look at a few pitchers. I'm a Cardinals fan, so let's look at a few of the Cardinals young arms.</p>
<ul>
<li><a href="https://www.baseball-reference.com/players/f/flaheja01.shtml">Jack Flaherty</a> had a great first season in the big leagues posting a FIP of 3.46 good enough for 15th best in the league and had a WAR (wins above replacement) of 6.0. </li>
<li><a href="https://www.baseball-reference.com/players/h/hicksjo03.shtml">Jordan Hicks</a> was having a great second season in the league with a FIP of 3.21 when he went down with a Tommy John injury. </li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">jack_f</span> <span class="o">=</span> <span class="n">hitter_stats</span><span class="p">[</span><span class="n">hitter_stats</span><span class="p">[</span><span class="s1">&#39;player_name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Jack Flaherty&#39;</span><span class="p">]</span>
<span class="n">jordan_h</span> <span class="o">=</span> <span class="n">hitter_stats</span><span class="p">[</span><span class="n">hitter_stats</span><span class="p">[</span><span class="s1">&#39;player_name&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;Jordan Hicks&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">jack_f</span><span class="p">[</span><span class="n">jack_f</span><span class="p">[</span><span class="s1">&#39;pitch_type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;FF&#39;</span><span class="p">][</span><span class="s1">&#39;pfx_x&#39;</span><span class="p">],</span><span class="n">jack_f</span><span class="p">[</span><span class="n">jack_f</span><span class="p">[</span><span class="s1">&#39;pitch_type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;FF&#39;</span><span class="p">][</span><span class="s1">&#39;pfx_z&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[5]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.collections.PathCollection at 0x7f860b904d68&gt;</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">jordan_h</span><span class="p">[</span><span class="n">jordan_h</span><span class="p">[</span><span class="s1">&#39;pitch_type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;SI&#39;</span><span class="p">][</span><span class="s1">&#39;pfx_x&#39;</span><span class="p">],</span><span class="n">jordan_h</span><span class="p">[</span><span class="n">jordan_h</span><span class="p">[</span><span class="s1">&#39;pitch_type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;SI&#39;</span><span class="p">][</span><span class="s1">&#39;pfx_z&#39;</span><span class="p">])</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.collections.PathCollection at 0x7f8611014198&gt;</pre>
</div>

</div>

<div class="output_area">

<div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Above are two scatterplots of the horizontal (X) and vertical (Z) movement of two different pitchers' pitches. The first is Jack Flaherty's fastball. You can see some horizontal movement averaging around -0.5 and some vertical movement averaging around 1.2. Contrast that with Jordan Hicks' sinker. He actually has a lot of horizontal movement averaging around -1.3, but has less vertical movement averaging around 0.9, which is pretty interesting because one is a fastball and the other is a sinker. Hicks' movement at 100+MPH has been discussed a lot.</p>
<p>Here is a link to <a href="https://twitter.com/PitchingNinja/status/1123048728967954433">Jordan Hicks' sinker in action</a></p>
<p>He won the 2018 and 2019 PitchingNinja Award for Most Unfair At Bat. <a href="https://twitter.com/PitchingNinja/status/1197126831239057410">Here's a link to the 2019 AB</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Predicting-hits">Predicting hits<a class="anchor-link" href="#Predicting-hits">&#182;</a></h3><p>Now let's go ahead and focus on the hitter statistics because after all our goal is to predict whether or not a ball put in play will be a hit.</p>
<p>Let's select those features along with the type and the event. The type is whether it was a hit or not and the event is the result of the ball strike.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">hit</span> <span class="o">=</span> <span class="n">hitter_stats</span><span class="p">[[</span><span class="s1">&#39;launch_angle&#39;</span><span class="p">,</span><span class="s1">&#39;launch_speed&#39;</span><span class="p">,</span><span class="s1">&#39;hc_x&#39;</span><span class="p">,</span><span class="s1">&#39;hc_y&#39;</span><span class="p">,</span><span class="s1">&#39;if_fielding_alignment&#39;</span><span class="p">,</span><span class="s1">&#39;of_fielding_alignment&#39;</span><span class="p">,</span><span class="s1">&#39;outs_when_up&#39;</span><span class="p">,</span><span class="s1">&#39;home_team&#39;</span><span class="p">,</span>
    <span class="s1">&#39;stand&#39;</span><span class="p">,</span><span class="s1">&#39;hit_location&#39;</span><span class="p">,</span><span class="s1">&#39;p_throws&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="p">,</span><span class="s1">&#39;events&#39;</span><span class="p">]]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we only want the balls in play, so let's subset the dataset to only have the balls in play.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play</span> <span class="o">=</span> <span class="n">hit</span><span class="p">[</span><span class="n">hit</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;X&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Next we want to ensure our label or outcome variable is accurate. Right now this is what event contains.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([&#39;single&#39;, &#39;field_out&#39;, &#39;double&#39;, &#39;home_run&#39;,
       &#39;grounded_into_double_play&#39;, &#39;field_error&#39;, &#39;sac_bunt&#39;, &#39;sac_fly&#39;,
       &#39;force_out&#39;, &#39;double_play&#39;, &#39;fielders_choice_out&#39;,
       &#39;fielders_choice&#39;, &#39;triple&#39;, &#39;sac_fly_double_play&#39;,
       &#39;sac_bunt_double_play&#39;, &#39;triple_play&#39;], dtype=object)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that while all of these are balls in play, there are singles, doubles, homeruns, along with fielders choice, errors, and sacrifices. So let's recode these to be hits or outs.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;hit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;events&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">1</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">in</span><span class="p">(</span><span class="s1">&#39;single&#39;</span><span class="p">,</span><span class="s1">&#39;double&#39;</span><span class="p">,</span><span class="s1">&#39;home_run&#39;</span><span class="p">,</span><span class="s1">&#39;triple&#39;</span><span class="p">)</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>How many balls were put in play in 2019?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">in_play</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>124167</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What was the hardest ball put in play in 2019? The weakest?</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;hardest hit ball: &#39;</span><span class="p">,</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;launch_speed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;softest hit ball: &#39;</span><span class="p">,</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;launch_speed&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>hardest hit ball:  118.9
softest hit ball:  7.6
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What would be our guess for with regards to which, if either of these were a hit? My initial hypothesis is that the soft one was not a hit, the hard one is likely to be a hit, but it could have been a line drive right at someone.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play</span><span class="p">[</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;launch_speed&#39;</span><span class="p">]</span><span class="o">==</span> <span class="mf">118.9</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[13]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>launch_angle</th>
      <th>launch_speed</th>
      <th>hc_x</th>
      <th>hc_y</th>
      <th>if_fielding_alignment</th>
      <th>of_fielding_alignment</th>
      <th>outs_when_up</th>
      <th>home_team</th>
      <th>stand</th>
      <th>hit_location</th>
      <th>p_throws</th>
      <th>type</th>
      <th>events</th>
      <th>hit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>399481</th>
      <td>7.5</td>
      <td>118.9</td>
      <td>133.18</td>
      <td>87.20</td>
      <td>Infield shift</td>
      <td>Standard</td>
      <td>0.0</td>
      <td>NYY</td>
      <td>R</td>
      <td>8.0</td>
      <td>R</td>
      <td>X</td>
      <td>single</td>
      <td>1</td>
    </tr>
    <tr>
      <th>559910</th>
      <td>4.5</td>
      <td>118.9</td>
      <td>81.83</td>
      <td>117.06</td>
      <td>Standard</td>
      <td>Standard</td>
      <td>1.0</td>
      <td>TOR</td>
      <td>R</td>
      <td>6.0</td>
      <td>R</td>
      <td>X</td>
      <td>single</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play</span><span class="p">[</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;launch_speed&#39;</span><span class="p">]</span><span class="o">==</span> <span class="mf">7.6</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[14]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>launch_angle</th>
      <th>launch_speed</th>
      <th>hc_x</th>
      <th>hc_y</th>
      <th>if_fielding_alignment</th>
      <th>of_fielding_alignment</th>
      <th>outs_when_up</th>
      <th>home_team</th>
      <th>stand</th>
      <th>hit_location</th>
      <th>p_throws</th>
      <th>type</th>
      <th>events</th>
      <th>hit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>46257</th>
      <td>33.8</td>
      <td>7.6</td>
      <td>124.13</td>
      <td>198.89</td>
      <td>Standard</td>
      <td>Standard</td>
      <td>2.0</td>
      <td>CLE</td>
      <td>L</td>
      <td>1.0</td>
      <td>R</td>
      <td>X</td>
      <td>field_out</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>so there were actually two balls hit at 118.9 and both were hits. The ball hit at 7.6 MPH was not a hit. The two batters that hit the ball 118.9 MPH...Giancarlo Stanton and Vlady Guerrero Jr. Honestly no surprises there. The 7.6 MPH was hit by Willi Castro, a shortstop for the Detroit Tigers.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Cleaning-Data-for-input-into-the-model">Cleaning Data for input into the model<a class="anchor-link" href="#Cleaning-Data-for-input-into-the-model">&#182;</a></h2><ul>
<li>Recodes</li>
<li>Dummy Codes</li>
</ul>
<p>One important thing we need to do for our models to be able to consume the data is recodes and dummy coding.</p>
<p>Now let's recode a few of our features to ensure the models can understand them, then let's dummy code the remaining features to ensure the model can understand those.</p>
<p>This first one identifies whether or not the pitcher and hitter are throwing/hitting from the right side.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Recodes</span>
<span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;right_handed_batter&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;stand&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span><span class="s2">&quot;R&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
<span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;right_handed_pitcher&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;p_throws&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span><span class="s2">&quot;R&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># drop all variables that will be recoded or dummy coded</span>
<span class="n">in_play_new</span> <span class="o">=</span> <span class="n">in_play</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;if_fielding_alignment&#39;</span><span class="p">,</span><span class="s1">&#39;of_fielding_alignment&#39;</span><span class="p">,</span><span class="s1">&#39;home_team&#39;</span><span class="p">,</span><span class="s1">&#39;stand&#39;</span><span class="p">,</span><span class="s1">&#39;type&#39;</span><span class="p">,</span><span class="s1">&#39;events&#39;</span><span class="p">,</span><span class="s1">&#39;p_throws&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play_new</span><span class="p">[</span><span class="s1">&#39;hit_location&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[17]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>array([ 9.,  8.,  3.,  5., nan,  4.,  7.,  6.,  1.,  2.])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play_new</span><span class="p">[</span><span class="s1">&#39;hit_location&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isna</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[18]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>7118</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>we can see here that a certain % of hit locations have a np.nan. After some quick digging I identified these as homeruns. So we can re-code these as hit location 10, but in reality we can clearly see how this is cheating at this point because now we know that every ball with a hit location of 10 is a hit (perfect signal). But let's still use it for the time being.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">in_play_new</span><span class="p">[</span><span class="s1">&#39;hit_location&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># dummy code and concatenate </span>
<span class="n">train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">in_play_new</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;if_fielding_alignment&#39;</span><span class="p">])],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">in_play_new</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;of_fielding_alignment&#39;</span><span class="p">])],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">train</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">in_play_new</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;home_team&#39;</span><span class="p">])],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># make sure there are no NAs</span>
<span class="n">train</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[86]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x_train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;hit&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="s1">&#39;hit&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">y_train</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[87]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>0.33403598888673514</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is interesting, because at first the .334 batting average seems a bit high, but in reality it's the batting average only for balls that were put in play. So we now know that by predicting an out every time we'd have a classification model that is 66.6% accurate.</p>
<h2 id="Area-Under-the-Curve">Area Under the Curve<a class="anchor-link" href="#Area-Under-the-Curve">&#182;</a></h2><p><a href="https://towardsdatascience.com/understanding-auc-roc-curve-68b2303cc9c5">This</a> is a good introduction to area under the curve, but basically when evaluating model performance, when the target is imbalanced, accuracy can often times be less important than the order of the probabilities assigned.</p>
<p><img src="https://i.imgur.com/UQRbVSq.png" alt="img"></p>
<h1 id="Logistic-Regression-as-our-baseline">Logistic Regression as our baseline<a class="anchor-link" href="#Logistic-Regression-as-our-baseline">&#182;</a></h1><p><img src="https://i.imgur.com/GJO3I1Y.png" alt="img"></p>
<p>Let's start by considering a more traditional model, the Logistic Regression. For more information on the mathematics behind LR <a href="https://machinelearningmastery.com/logistic-regression-for-machine-learning/">this article</a> may be useful.</p>
<p>We'll start off with a fairly simple k-fold cross-validation and we'll use 10 folds. We'll then average the area under the curve together to get our AUC across the 10 folds.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># cross-validate basic Logistic Regression model to get a baseline AUC</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">cross_val_score</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="k">import</span> <span class="n">LogisticRegression</span>
<span class="n">lr_cv</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">LogisticRegression</span><span class="p">(),</span>
<span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">,</span><span class="n">cv</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Logistic Regression cross-validated mean AUC: &quot;</span><span class="p">,</span><span class="n">lr_cv</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Logistic Regression cross-validated mean AUC:  0.882987370775784
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So, we have a baseline area under the cruve of 0.883. That's a pretty good start, but remember we almost certainly have perfect signal from the balls that were hit to "fielder 10".</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="K-Nearest-Neigbors">K-Nearest Neigbors<a class="anchor-link" href="#K-Nearest-Neigbors">&#182;</a></h2><p>K-Nearest Neigbors is another algorithm that may be useful. It uses Euclidean Distance and a set of neigbors (nearest data points) to label a target. The basic premise is that if the features are similar to features we know were a hit then it's likely to be a hit, etc. For more specifics on the KNN algorithm check out this <a href="https://machinelearningmastery.com/k-nearest-neighbors-for-machine-learning/">article</a>. It makes sense that balls in play most like other balls in play will have a similar result, but the problem is identifying the ideal number of neighbors. Let's write a for loop to identify this.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">neighbors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">50</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[51]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cv_means</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">neighbors</span><span class="p">:</span>
    <span class="n">knn_cv</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="n">n</span><span class="p">),</span>
<span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">,</span><span class="n">cv</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
    <span class="n">cv_means</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">knn_cv</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">cv_means</span><span class="p">)</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[58]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>32</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see here that the argmax for the knn, i.e. the largest value in the array is at position # 32. We can index to position 32 to find out what knn value that is by doing the following.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[62]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">neighbors</span><span class="p">[</span><span class="mi">32</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt output_prompt">Out[62]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>66</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>so we can see that 66 neighbors was ideal in the cross-validation dataset, so let's go ahead and use that.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[61]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.neighbors</span> <span class="k">import</span> <span class="n">KNeighborsClassifier</span>
<span class="n">knn_cv</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">66</span><span class="p">),</span>
<span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">,</span><span class="n">cv</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;K-Nearest Neighbors cross-validated mean AUC: &quot;</span><span class="p">,</span><span class="n">knn_cv</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>K-Nearest Neighbors cross-validated mean AUC:  0.961131334904106
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An AUC of 0.96113 is pretty impressive for such a simple algorithm, but now it's time to bring in the big boys. Random Forests and Gradient Boosted Trees.</p>
<h2 id="Random-Forests">Random Forests<a class="anchor-link" href="#Random-Forests">&#182;</a></h2><p><img src="https://i.imgur.com/ib25WBR.png" alt="img"></p>
<p>Next, let's look at one of the more popular "Machine Learning" algorithms today the Random Forests algorithm. In fairly simple terms the Random Forests algorithm uses bagging where it takes random subsets of both data and features and creates a tree-based model to predict the label. All of these "trees" are then aggregated together to form an <strong>ensemble</strong> model using the <a href="https://en.wikipedia.org/wiki/Wisdom_of_the_crowd">wisdom of the crowds</a> theory. For more specifics I refer you to <a href="https://machinelearningmastery.com/bagging-and-random-forest-ensemble-algorithms-for-machine-learning/">this article</a>.</p>
<p>We will implement <a href="https://scikit-learn.org/stable/modules/generated/sklearn.ensemble.RandomForestClassifier.html">sklearn</a> version of the algorithm.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># cross-validate basic Random Forest model to get an AUC</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="k">import</span> <span class="n">RandomForestClassifier</span>
<span class="n">rf_cv</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">RandomForestClassifier</span><span class="p">(),</span>
<span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">,</span><span class="n">cv</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Random Forest cross-validated mean AUC: &quot;</span><span class="p">,</span><span class="n">rf_cv</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Random Forest cross-validated mean AUC:  0.9596057575503446
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="XGBoosts-implementation-of-Gradient-Boosted-Trees">XGBoosts implementation of Gradient Boosted Trees<a class="anchor-link" href="#XGBoosts-implementation-of-Gradient-Boosted-Trees">&#182;</a></h2><p>The final algorithm we will try is typically considered the most powerful. Unlike random forests which randomly develops trees via bagging, gradient boosting takes a purposeful approach and focuses on improving the <strong>weak learners</strong> or the trees that are performing relatively poorly. By doing this it boosts the overall success of the combination of trees at the end. For more specifics I refer you to <a href="https://machinelearningmastery.com/gentle-introduction-gradient-boosting-algorithm-machine-learning/">this article</a>.</p>
<p>We will actually not be using sklearn for the gradient boosting algorithm (although I have heard that the most recent version of sklearn does have a gradient boosting algorithm on par with XGboost and LightGBM. For this we will focus on <a href="https://xgboost.readthedocs.io/en/latest/python/python_intro.html">XGBoost</a>. Luckily for us the developers built the API to reflect the sklearn implementation, which makes it almost exactly the same.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[66]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># cross-validate basic XGBoost model to get an AUC</span>
<span class="kn">from</span> <span class="nn">xgboost</span> <span class="k">import</span> <span class="n">XGBClassifier</span>
<span class="n">xgb_cv</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">XGBClassifier</span><span class="p">(),</span>
<span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">,</span><span class="n">cv</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;XGBoost cross-validated mean AUC: &quot;</span><span class="p">,</span><span class="n">xgb_cv</span><span class="o">.</span><span class="n">mean</span><span class="p">())</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>XGBoost cross-validated mean AUC:  0.9600988888258606
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="WOW!!">WOW!!<a class="anchor-link" href="#WOW!!">&#182;</a></h4><p>Nearest Neigbors outperformed both XGBoost and Random Forests. Let's go ahead and run XGBoost and Nearest Neigbors ina train/test split.</p>
<p>Let's use a 65/35 split.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[134]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">train_test_split</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">test_size</span><span class="o">=.</span><span class="mi">35</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">101</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">X_test</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span><span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>80480 43336 123816
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="K-Nearest-Neigbors">K-Nearest Neigbors<a class="anchor-link" href="#K-Nearest-Neigbors">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[68]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">roc_auc_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">accuracy_score</span>

<span class="n">knn</span> <span class="o">=</span> <span class="n">KNeighborsClassifier</span><span class="p">(</span><span class="n">n_neighbors</span><span class="o">=</span><span class="mi">66</span><span class="p">)</span>
<span class="n">knn</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">knn_proba</span> <span class="o">=</span> <span class="n">knn</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="c1"># Predictions###############</span>
<span class="n">knn_proba_2</span> <span class="o">=</span> <span class="n">knn_proba</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">knn_pred</span> <span class="o">=</span> <span class="n">knn</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;K-Nearest Neigbors Accuracy:&#39;</span><span class="p">,</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">knn_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;K-Nearest Neigbors AUC:&#39;</span><span class="p">,</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">knn_proba_2</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>K-Nearest Neigbors Accuracy: 0.912774598486247
K-Nearest Neigbors AUC: 0.9610448809740594
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[69]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">classification_report</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">knn_pred</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>             precision    recall  f1-score   support

          0       0.92      0.96      0.94     28895
          1       0.91      0.82      0.86     14441

avg / total       0.91      0.91      0.91     43336

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="XGBoost">XGBoost<a class="anchor-link" href="#XGBoost">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[70]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">roc_auc_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">xgboost</span> <span class="k">import</span> <span class="n">XGBClassifier</span>

<span class="n">xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">()</span>
<span class="n">xgb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">xgb_proba</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="c1"># Predictions###############</span>
<span class="n">xgb_proba_2</span> <span class="o">=</span> <span class="n">xgb_proba</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">xgb_pred</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost Accuracy:&#39;</span><span class="p">,</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">xgb_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost AUC:&#39;</span><span class="p">,</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">xgb_proba_2</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>XGBoost Accuracy: 0.9163743769614178
XGBoost AUC: 0.9608995982830845
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[71]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">classification_report</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">xgb_pred</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>             precision    recall  f1-score   support

          0       0.92      0.96      0.94     28895
          1       0.91      0.83      0.87     14441

avg / total       0.92      0.92      0.92     43336

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So you can see that while K-Nearest Neighbors has a slightly higher AUC, XGBoost outperforms it when it comes to accuracy, but both are very good and drastically outperform logistic regression. One final thing we can do is a randomized grid search for xgboost. We tuned the hyper parameter for knn, by identifying the ideal # of nearest neigbors, but so far we're using XGBoost's default settings. Can we get a little more accuracy and AUC by picking ideal hypers?</p>
<p>Let's give it a try.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[74]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="k">import</span> <span class="n">randint</span> <span class="k">as</span> <span class="n">sp_randint</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="k">import</span> <span class="n">time</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">RandomizedSearchCV</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[82]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Utility function to report best scores</span>
<span class="k">def</span> <span class="nf">report</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">n_top</span><span class="o">=</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_top</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">candidates</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">flatnonzero</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;rank_test_score&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">i</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">candidate</span> <span class="ow">in</span> <span class="n">candidates</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Model with rank: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Mean validation score: </span><span class="si">{0:.3f}</span><span class="s2"> (std: </span><span class="si">{1:.3f}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                  <span class="n">results</span><span class="p">[</span><span class="s1">&#39;mean_test_score&#39;</span><span class="p">][</span><span class="n">candidate</span><span class="p">],</span>
                  <span class="n">results</span><span class="p">[</span><span class="s1">&#39;std_test_score&#39;</span><span class="p">][</span><span class="n">candidate</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Parameters: </span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;params&#39;</span><span class="p">][</span><span class="n">candidate</span><span class="p">]))</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[130]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># specify parameters and distributions to sample from</span>
<span class="n">xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">n_jobs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="n">param_dist</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;learning_rate&quot;</span><span class="p">:</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">.</span><span class="mi">01</span><span class="p">,</span><span class="o">.</span><span class="mi">15</span><span class="p">,</span><span class="mi">15</span><span class="p">),</span>
              <span class="s1">&#39;min_child_weight&#39;</span><span class="p">:</span> <span class="n">sp_randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">7</span><span class="p">),</span>
              <span class="s2">&quot;max_depth&quot;</span><span class="p">:</span> <span class="n">sp_randint</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="mi">10</span><span class="p">),</span>
              <span class="s2">&quot;reg_lambda&quot;</span><span class="p">:[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
              <span class="s2">&quot;reg_alpha&quot;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span>
              <span class="s2">&quot;n_estimators&quot;</span><span class="p">:[</span><span class="mi">250</span><span class="p">,</span><span class="mi">500</span><span class="p">]}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[131]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># run randomized search</span>
<span class="n">n_iter_search</span> <span class="o">=</span> <span class="mi">50</span>
<span class="n">random_search</span> <span class="o">=</span> <span class="n">RandomizedSearchCV</span><span class="p">(</span><span class="n">xgb</span><span class="p">,</span> <span class="n">param_distributions</span><span class="o">=</span><span class="n">param_dist</span><span class="p">,</span>
                                   <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter_search</span><span class="p">,</span><span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;roc_auc&#39;</span><span class="p">,</span><span class="n">verbose</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="n">random_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RandomizedSearchCV took </span><span class="si">%.2f</span><span class="s2"> seconds for </span><span class="si">%d</span><span class="s2"> candidates&quot;</span>
      <span class="s2">&quot; parameter settings.&quot;</span> <span class="o">%</span> <span class="p">((</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">),</span> <span class="n">n_iter_search</span><span class="p">))</span>
<span class="n">report</span><span class="p">(</span><span class="n">random_search</span><span class="o">.</span><span class="n">cv_results_</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://i.imgur.com/3xGvvvB.png" alt="img"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The results of the grid search show us that the validation score of the randomized cross validation was 0.975</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[92]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">roc_auc_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">xgboost</span> <span class="k">import</span> <span class="n">XGBClassifier</span>

<span class="n">xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span><span class="n">learning_rate</span><span class="o">=</span><span class="mf">0.0799999999</span><span class="p">,</span><span class="n">min_child_weight</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span><span class="n">reg_alpha</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">reg_lambda</span><span class="o">=</span><span class="mf">0.0</span><span class="p">)</span>
<span class="n">xgb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">xgb_proba</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="c1"># Predictions###############</span>
<span class="n">xgb_proba_2</span> <span class="o">=</span> <span class="n">xgb_proba</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">xgb_pred</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost Accuracy:&#39;</span><span class="p">,</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">xgb_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost AUC:&#39;</span><span class="p">,</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">xgb_proba_2</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>XGBoost Accuracy: 0.9378345947941665
XGBoost AUC: 0.9752752321835964
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[93]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">classification_report</span>
<span class="nb">print</span><span class="p">(</span><span class="n">classification_report</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">xgb_pred</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>             precision    recall  f1-score   support

          0       0.94      0.97      0.95     28895
          1       0.94      0.87      0.90     14441

avg / total       0.94      0.94      0.94     43336

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So, we achieved a similar AUC on our holdout sample using the hyperparameters obtained from the grid search and we got our accuracy up to almost 94%. Let's take a look at which features were deemed most important.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[94]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">feats</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># a dict to hold feature_name: feature_importance</span>
<span class="k">for</span> <span class="n">feature</span><span class="p">,</span> <span class="n">importance</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">xgb</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">):</span>
    <span class="n">feats</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">importance</span> <span class="c1">#add the name/value pair </span>

<span class="n">importances</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">feats</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Gini-importance&#39;</span><span class="p">})</span>
<span class="kn">from</span> <span class="nn">pylab</span> <span class="k">import</span> <span class="n">rcParams</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="mi">8</span>
<span class="n">figure</span> <span class="o">=</span> <span class="n">importances</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Gini-importance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">15</span><span class="p">:,:]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA6UAAAIbCAYAAAATljj3AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDIuMi4zLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvIxREBQAAIABJREFUeJzs3XmYZVV5L+Dfx6yIE+AEaKOCCkIcGjTRiBoHDAiOAaMRY4SoQQ2OOMSLRBOHxBgNSswg6hUcMBqiJHidosaJJhIFlUgQtdVoS9RoIkPrun+sXVC2DV3Q1b26Tr3v89TTdc7ZXedbp3ads39rrb12tdYCAAAAI2w1ugAAAACWL6EUAACAYYRSAAAAhhFKAQAAGEYoBQAAYBihFAAAgGGEUgAAAIYRSgEAABhGKAUAAGCYbUY98S677NJWrFgx6ukBAADYhM4555zvtdZ23dB2w0LpihUrsmrVqlFPDwAAwCZUVV9byHam7wIAADCMUAoAAMAwQikAAADDDDundH2uuOKKrF69OpdeeunoUthIO+ywQ3bfffdsu+22o0sBAAC2YFtUKF29enV22mmnrFixIlU1uhyuo9ZaLrnkkqxevTp77rnn6HIAAIAt2BY1fffSSy/NzjvvLJAucVWVnXfe2Yg3AACwQVtUKE0ikM4Iv0cAAGAhtrhQCgAAwPKxRZ1Tuq4Vx79/UX/exS8/ZEHbfec738lxxx2XT3/607nJTW6S7bbbLs997nOzxx575C1veUte+9rXXuP//5Vf+ZV88pOf/IX7Tz755Fz/+tfP4x//+OtU/3Vxyimn5EEPelBudatbbbbnBAAAWKgtOpSO0FrLwx72sBx11FE59dRTkyRf+9rXcsYZZ+ThD394Vq5cucGfsb5AmiRPfvKTF7XWDfnpT3+aU045JXe+852FUgAAYItk+u46PvzhD2e77bb7uQB5m9vcJk972tPy0Y9+NIceemiS5IQTTsgTn/jE3Pe+981tb3vbnxs9vcENbrDen33CCSfkT/7kT5Ik973vfXPcccflPve5T+50pzvl7LPPziMe8YjstddeedGLXpQkufjii3PHO94xRx11VPbff/886lGPyv/+7/8mST70oQ/lrne9a/bbb7888YlPzGWXXZYkWbFiRU488cTc+973zmmnnZZVq1blsY99bO5yl7vkJz/5SU488cQccMABufOd75xjjjkmrbUr63ne856XAw88MHvvvXc+/vGPJ+nB9tnPfnb222+/7L///nnd616XJDnnnHNy0EEH5e53v3se/OAH59vf/vai/Q4AAIDlQyhdx/nnn5+73e1uC9r2y1/+cs4666x89rOfzUte8pJcccUV1+q5tttuu3zsYx/Lk5/85Bx++OE56aSTct555+WUU07JJZdckiS54IILcswxx+Tzn/98bnjDG+b1r399Lr300jzhCU/IO97xjnzhC1/I2rVr84Y3vOHKn7vDDjvkE5/4RB73uMdl5cqVedvb3pZzzz0317ve9XLsscfm7LPPznnnnZef/OQned/73nfl/1u7dm0++9nP5jWveU1e8pKXJEne+MY35qtf/Wo+97nP5fOf/3we+9jH5oorrsjTnva0nH766TnnnHPyxCc+MS984QuvVdsBAAASoXSDfu/3fi+/9Eu/lAMOOOAXHjvkkEOy/fbbZ5dddsnNbnazfOc737lWP/uwww5Lkuy3337Zd999c8tb3jLbb799bnvb2+Yb3/hGkmSPPfbIve51ryTJ4x73uHziE5/IBRdckD333DN77713kuSoo47Kxz72sSt/7hFHHHG1z/mRj3wk97jHPbLffvvlwx/+cM4///wrH3vEIx6RJLn73e+eiy++OEnywQ9+ME9+8pOzzTZ9pvdNb3rTXHDBBTnvvPPywAc+MHe5y13y0pe+NKtXr75WbQcAAEicU/oL9t1337z73e++8vZJJ52U733ve+s9l3T77be/8vutt946a9eu/bnHX/jCF+b97++LNZ177rlX+/+32mqrn/tZW2211ZU/a91Lq1TVlVNur86OO+643vsvvfTSPPWpT82qVauyxx575IQTTvi5a4nO1TC/La21X6ihtZZ99903n/rUp66xDgAAgA0xUrqO+9///rn00kt/bjrs3Hmc19bLXvaynHvuuesNpAv19a9//crwd9ppp+Xe97537njHO+biiy/OhRdemCR561vfmoMOOmi9/3+nnXbKj370oyS5MoDusssu+fGPf5zTTz99g8//oAc9KCeffPKVIfW//uu/coc73CFr1qy5sq4rrrji50ZcAQAAFmqLHild6CVcFlNV5b3vfW+OO+64vPKVr8yuu+6aHXfcMa94xSs2ey1Jcqc73SlvfvOb87u/+7vZa6+98pSnPCU77LBD3vSmN+XRj3501q5dmwMOOOBqV/Z9whOekCc/+cm53vWul0996lM5+uijs99++2XFihXrnZK8ric96Un593//9+y///7Zdtttc/TRR+fYY4/N6aefnqc//en54Q9/mLVr1+b3f//3s++++y528wEAgBlXG5oKuqmsXLmyrVq16ufu+9KXvpQ73elOQ+rZEl188cU59NBDc955540u5Trx+wQAgOWrqs5prW3wmpqm7wIAADCMULoFW7FixZIdJQUAAFiILe6c0vWt9srSM2paOAAAzKIVx79/yPNujnV+tqiR0h122CGXXHKJQLPEtdZyySWXZIcddhhdCgAAsIXbokZKd99996xevTpr1qwZXQobaYcddsjuu+8+ugwAAGALt0WF0m233TZ77rnn6DIAAADYTLao6bsAAAAsL0IpAAAAwwilAAAADCOUAgAAMIxQCgAAwDBCKQAAAMMIpQAAAAwjlAIAADCMUAoAAMAwQikAAADDCKUAAAAMI5QCAAAwjFAKAADAMEIpAAAAwwilAAAADCOUAgAAMIxQCgAAwDBCKQAAAMMIpQAAAAwjlAIAADCMUAoAAMAwQikAAADDCKUAAAAMI5QCAAAwjFAKAADAMEIpAAAAwywolFbVwVV1QVVdWFXHX802v1FVX6yq86vq1MUtEwAAgFm0zYY2qKqtk5yU5IFJVic5u6rOaK19cd42eyV5fpJ7tda+X1U321QFAwAAMDsWMlJ6YJILW2sXtdYuT/L2JIevs83RSU5qrX0/SVpr313cMgEAAJhFCwmluyX5xrzbq6f75ts7yd5V9S9V9emqOnixCgQAAGB2bXD6bpJaz31tPT9nryT3TbJ7ko9X1Z1baz/4uR9UdUySY5Lk1re+9bUuFgAAgNmykJHS1Un2mHd79yTfWs82f99au6K19tUkF6SH1J/TWntja21la23lrrvuel1rBgAAYEYsJJSenWSvqtqzqrZLcmSSM9bZ5r1J7pckVbVL+nTeixazUAAAAGbPBkNpa21tkmOTnJXkS0ne2Vo7v6pOrKrDps3OSnJJVX0xyUeSPKe1dsmmKhoAAIDZsJBzStNaOzPJmevc9+J537ckz5y+AAAAYEEWMn0XAAAANgmhFAAAgGGEUgAAAIYRSgEAABhGKAUAAGAYoRQAAIBhhFIAAACGEUoB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6rnQ9ZIOBL5Aadf9c9sL6/c/C5wAvMv2sj737mT75QEPOiIigLTvRkRERBdoS0jXUCqfa4Djamsuti8FZgEHbOLeJKQREQ1KpTQiIiI6VtuO0SOAi4GXgMsoA43+BpgL3Gz7xQbDjIiIV5FKaURERHSktoR0MqVldynwFkpyug44DzgROF9SdrNHRAxSqZRGRERER5G0t+3n69fDKRXR22zPrhXTPwZ2oKx+2QPY0/bjjQUcERGvKpXSiIiI6BiSBEyT9BYA26spa14m1mFH/0Zp2Z0AnA88b/vxel9ERAxCSUojIiKiI7TadW2fC7xO0i31W7dS9pCeVl9/H1gCHAscAuC0hkVEDFpJSiMiIqKj1BbdL1OqozcCi4DFwEmS5gIPABcB/8ompu1GRMTgkjOlERER0TEkHQn8JTDV9nclzQeeoAw3Gga8A3gGGA3cBBxn+wcNhRsREZshldKIiIjoJLtR2nJPqq8nAIcC022vtD0HGA58Ajg5CWlExOCXpDQiIiI6hu1/Ak4BzpL0PtsvU5LU0ZIOre95Cphie3GDoUZExGbKzq6IiIjoKLbvk7QOuFrSUNu3SHpn3Vm6ve31tl9oOs6IiNg8OVMaERERHUnSicCngWOAZbbXNxxSRERsgSSlERER0bEkjbK9vOk4IiJiyyUpjYiIiIiIiMZk0FFEREREREQ0JklpRERERERENCZJaURERERERDQmSWlEREREREQ0JklpRERERERENCZJaURERERERDQmSWlEREREREQ05n8BlS26cMmKyt0AAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>So we can see that by far the most important feature is hit location, which makes a ton of sense because I recoded a hit location of 10 to be homeruns and balls first touched by outfielders are much more likely to be hits than balls first touched by infielders. Let's go ahead and remove that feature and the hc_y feature as it shows how far the ball was actually hit. Then let's create a feature which shows whether or not the batter/pitcher matchup was same or different as evidence typically shows hitters can see the ball for slightly longer if the pitcher is coming across their body, which tends to favor opposite hand matchups.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[95]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;hit_location&#39;</span><span class="p">,</span><span class="s1">&#39;hc_y&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[125]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x_train</span> <span class="o">=</span> <span class="n">train</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s1">&#39;hit&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">y_train</span> <span class="o">=</span> <span class="n">train</span><span class="p">[</span><span class="s1">&#39;hit&#39;</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[126]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">x_train</span><span class="p">[</span><span class="s1">&#39;opp_matchup&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">x_train</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;right_handed_batter&#39;</span><span class="p">]</span> <span class="o">==</span><span class="n">x</span><span class="p">[</span><span class="s1">&#39;right_handed_pitcher&#39;</span><span class="p">]</span> <span class="k">else</span> <span class="mi">1</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[121]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">train_test_split</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">,</span><span class="n">test_size</span><span class="o">=.</span><span class="mi">35</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">101</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">X_train</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">X_test</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span><span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">X_test</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>80480 43336 123816
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[122]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">roc_auc_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">xgboost</span> <span class="k">import</span> <span class="n">XGBClassifier</span>

<span class="n">xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">()</span>
<span class="n">xgb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">xgb_proba</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="c1"># Predictions###############</span>
<span class="n">xgb_proba_2</span> <span class="o">=</span> <span class="n">xgb_proba</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">xgb_pred</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost Accuracy:&#39;</span><span class="p">,</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">xgb_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost AUC:&#39;</span><span class="p">,</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">xgb_proba_2</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>XGBoost Accuracy: 0.8513476093778845
XGBoost AUC: 0.9136241972410872
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can see that we lost a fair amount of both accuracy and AUC by removing hit location and the y-coordinate indicating how far the ball traveled.</p>
<p>Let's redo our grid search with the new smaller model.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="p">()</span>
<span class="n">random_search</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RandomizedSearchCV took </span><span class="si">%.2f</span><span class="s2"> seconds for </span><span class="si">%d</span><span class="s2"> candidates&quot;</span>
      <span class="s2">&quot; parameter settings.&quot;</span> <span class="o">%</span> <span class="p">((</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start</span><span class="p">),</span> <span class="n">n_iter_search</span><span class="p">))</span>
<span class="n">report</span><span class="p">(</span><span class="n">random_search</span><span class="o">.</span><span class="n">cv_results_</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="https://i.imgur.com/gAmtsj2.png" alt="img"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[135]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">roc_auc_score</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="k">import</span> <span class="n">accuracy_score</span>
<span class="kn">from</span> <span class="nn">xgboost</span> <span class="k">import</span> <span class="n">XGBClassifier</span>

<span class="n">xgb</span> <span class="o">=</span> <span class="n">XGBClassifier</span><span class="p">(</span><span class="n">max_depth</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span><span class="n">learning_rate</span><span class="o">=</span><span class="mf">0.1</span><span class="p">,</span><span class="n">min_child_weight</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="n">n_estimators</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span><span class="n">reg_alpha</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">reg_lambda</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">xgb</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span><span class="n">y_train</span><span class="p">)</span>
<span class="n">xgb_proba</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict_proba</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="c1"># Predictions###############</span>
<span class="n">xgb_proba_2</span> <span class="o">=</span> <span class="n">xgb_proba</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span>
<span class="n">xgb_pred</span> <span class="o">=</span> <span class="n">xgb</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost Accuracy:&#39;</span><span class="p">,</span><span class="n">accuracy_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span> <span class="n">xgb_pred</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;XGBoost AUC:&#39;</span><span class="p">,</span><span class="n">roc_auc_score</span><span class="p">(</span><span class="n">y_test</span><span class="p">,</span><span class="n">xgb_proba_2</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>XGBoost Accuracy: 0.879799704633561
XGBoost AUC: 0.9403944619477198
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The amount of lift we got from the grid search is actually pretty surprising to me. We had about a 3% lift in both accuracy and AUC. Let's look at the feature importance now.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[137]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">feats</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># a dict to hold feature_name: feature_importance</span>
<span class="k">for</span> <span class="n">feature</span><span class="p">,</span> <span class="n">importance</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">X_train</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">xgb</span><span class="o">.</span><span class="n">feature_importances_</span><span class="p">):</span>
    <span class="n">feats</span><span class="p">[</span><span class="n">feature</span><span class="p">]</span> <span class="o">=</span> <span class="n">importance</span> <span class="c1">#add the name/value pair </span>

<span class="n">importances</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">feats</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;Gini-importance&#39;</span><span class="p">})</span>
<span class="kn">from</span> <span class="nn">pylab</span> <span class="k">import</span> <span class="n">rcParams</span>
<span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span><span class="mi">8</span>
<span class="n">figure</span> <span class="o">=</span> <span class="n">importances</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Gini-importance&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:,:]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAA6sAAAIbCAYAAAANXwhEAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADl0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uIDIuMi4zLCBodHRwOi8vbWF0cGxvdGxpYi5vcmcvIxREBQAAIABJREFUeJzs3XmcZHV5L/7PA8OiuAOJC+hgxAUEFwY00ajRK+JFQSNccYkQF4IG8xNjFJcYJHqDy41GgwuJCu4YEhMiKCaiUePGoAZBxUzIKKNeRVCvRBEGnt8fpwbbzuDUMD1Tp3ve79drXlN16lT106e7q87nfLfq7gAAAMCYbDPrAgAAAGA+YRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYnWWzLmC+XXbZpZcvXz7rMgAAANgMzj///O93964b2m90YXX58uVZuXLlrMsAAABgM6iqb0yzn27AAAAAjI6wCgAAwOgIqwAAAIzO6Masrs8111yTNWvW5Kqrrpp1KSyAHXfcMbvttlu22267WZcCAACM1KIIq2vWrMnNb37zLF++PFU163LYBN2dyy+/PGvWrMkee+wx63IAAICRWhTdgK+66qrsvPPOguoSUFXZeeedtZIDAAC/1KIIq0kE1SXEzxIAANiQRRNWAQAA2HosijGr8y0//qwFfb3VJx081X7f/e53c9xxx+Wzn/1sbn3rW2f77bfP85///Oy+++55xzvekde//vW/9Pm/8Ru/kU9/+tP/bfub3/zm3PSmN81TnvKUG1X/jXHqqafmwAMPzO1vf/st9jUBAACmtSjD6ix0dx7zmMfkyCOPzHve854kyTe+8Y2ceeaZeexjH5sVK1Zs8DXWF1ST5JhjjlnQWjfk2muvzamnnpp73vOewioAADBKugFP6dxzz83222//C8HyTne6U5797Gfn4x//eB71qEclSU444YQ89alPzUMe8pDc+c53/oXW1pvd7Gbrfe0TTjghr3nNa5IkD3nIQ3LcccflQQ96UO5xj3vkvPPOy2//9m9nzz33zEte8pIkyerVq3P3u989Rx55ZPbdd98cdthh+clPfpIk+ehHP5r73Oc+2WefffLUpz41P/vZz5Iky5cvz4knnpgHPvCBee9735uVK1fmSU96Uu5973vnpz/9aU488cTsv//+uec975mjjz463X19PS94wQtywAEH5K53vWs++clPJhkC7/Oe97zss88+2XffffOGN7whSXL++efnwQ9+cPbbb7884hGPyHe+850F+xkAAABbD2F1ShdddFHue9/7TrXv1772tZxzzjn5/Oc/n5e97GW55pprNuprbb/99vnEJz6RY445JoceemhOPvnkXHjhhTn11FNz+eWXJ0kuvvjiHH300bngggtyi1vcIm984xtz1VVX5aijjsrpp5+eL3/5y1m7dm3e9KY3Xf+6O+64Yz71qU/lyU9+clasWJF3v/vd+dKXvpSb3OQmOfbYY3PeeeflwgsvzE9/+tN88IMfvP55a9euzec///m87nWvy8te9rIkySmnnJL//M//zBe/+MVccMEFedKTnpRrrrkmz372s3PGGWfk/PPPz1Of+tS8+MUv3qjvHQAAIBFWb7Tf//3fz73uda/sv//+/+2xgw8+ODvssEN22WWX/Mqv/Eq++93vbtRrH3LIIUmSffbZJ3vvvXdud7vbZYcddsid73znXHrppUmS3XffPQ94wAOSJE9+8pPzqU99KhdffHH22GOP3PWud02SHHnkkfnEJz5x/es+/vGPv8Gv+bGPfSz3u9/9ss8+++Tcc8/NRRdddP1jv/3bv50k2W+//bJ69eokyT//8z/nmGOOybJlQ0/y29zmNrn44otz4YUX5uEPf3jufe975+Uvf3nWrFmzUd87AABAYszq1Pbee+/87d/+7fX3Tz755Hz/+99f71jVHXbY4frb2267bdauXfsLj7/4xS/OWWcNk0R96UtfusHnb7PNNr/wWttss831rzV/+Zequr7r7g3Zaaed1rv9qquuyrOe9aysXLkyu+++e0444YRfWAd1XQ1zv5fu/m81dHf23nvvfOYzn/mldQAAAGyIltUpPfShD81VV131C91q140T3ViveMUr8qUvfWm9QXVa3/zmN68Phe9973vzwAc+MHe/+92zevXqrFq1Kknyzne+Mw9+8IPX+/yb3/zm+fGPf5wk1wfTXXbZJVdeeWXOOOOMDX79Aw88MG9+85uvD69XXHFF7na3u+Wyyy67vq5rrrnmF1poAQAAprUoW1anXWpmIVVV/v7v/z7HHXdcXvWqV2XXXXfNTjvtlFe+8pVbvJYkucc97pHTTjstv/d7v5c999wzz3zmM7Pjjjvm7W9/ew4//PCsXbs2+++//w3ONHzUUUflmGOOyU1ucpN85jOfyTOe8Yzss88+Wb58+Xq7Ns/39Kc/PV//+tez7777ZrvttssznvGMHHvssTnjjDPyB3/wB/nRj36UtWvX5jnPeU723nvvhf72AQCAJa421HV0S1uxYkWvXLnyF7Z99atfzT3ucY8ZVTQ+q1evzqMe9ahceOGFsy7lRvMzBQCArVNVnd/dG1z7UzdgAAAARkdYXYSWL1++qFtVAQAANmTRjFld3+yzLE5j63oOAACb2/Ljz5p1CRttFnMFzbUoWlZ33HHHXH755ULOEtDdufzyy7PjjjvOuhQAAGDEFkXL6m677ZY1a9bksssum3UpLIAdd9wxu+2226zLAAAARmyqsFpVByX5iyTbJvnr7j5p3uMPSvK6JPsmOaK7z5j3+C2SfDXJB7r72I0tcrvttssee+yxsU8DAABgkdpgN+Cq2jbJyUkemWSvJE+oqr3m7fbNJEclec8NvMyfJvmXG18mAAAAW5NpxqwekGRVd1/S3VcneV+SQ+fu0N2ru/uCJNfNf3JV7ZfkV5N8ZAHqBQAAYCswTVi9Q5JL59xfM9m2QVW1TZL/k+SPNr40AAAAtlbThNX1rRcz7bS8z0pydndf+st2qqqjq2plVa00iRIAAADTTLC0Jsnuc+7vluTbU77+ryf5zap6VpKbJdm+qq7s7uPn7tTdpyQ5JUlWrFhhfRoAAICt3DRh9bwke1bVHkm+leSIJE+c5sW7+0nrblfVUUlWzA+qAAAAMN8GuwF399okxyY5J8PyM+/v7ouq6sSqOiRJqmr/qlqT5PAkb6mqizZn0QAAACxtU62z2t1nJzl73raXzrl9Xobuwb/sNU5NcupGVwgAAMBWZ5oJlgAAAGCLElYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGJ1lsy4AAACYreXHnzXrEjba6pMOnnUJbGZaVgEAABgdYRUAAIDRmSqsVtVBVXVxVa2qquPX8/iDquoLVbW2qg6bs/3eVfWZqrqoqi6oqscvZPEAAAAsTRsMq1W1bZKTkzwyyV5JnlBVe83b7ZtJjkrynnnbf5LkKd29d5KDkryuqm61qUUDAACwtE0zwdIBSVZ19yVJUlXvS3Jokq+s26G7V08eu27uE7v763Nuf7uqvpdk1yQ/3OTKAQAAWLKm6QZ8hySXzrm/ZrJto1TVAUm2T/IfG/tcAAAAti7ThNVaz7bemC9SVbdL8s4kv9vd163n8aOramVVrbzssss25qUBAABYgqYJq2uS7D7n/m5Jvj3tF6iqWyQ5K8lLuvuz69unu0/p7hXdvWLXXXed9qUBAABYoqYJq+cl2bOq9qiq7ZMckeTMaV58sv8Hkryju//mxpcJAADA1mSDYbW71yY5Nsk5Sb6a5P3dfVFVnVhVhyRJVe1fVWuSHJ7kLVV10eTp/yvJg5IcVVVfmvy792b5TgAAAFgyppkNON19dpKz52176Zzb52XoHjz/ee9K8q5NrBEAAICtzDTdgAEAAGCLElYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYHWEVAACA0RFWAQAAGB1hFQAAgNERVgEAABgdYRUAAIDREVYBAAAYnanCalUdVFUXV9Wqqjp+PY8/qKq+UFVrq+qweY8dWVX/Pvl35EIVDgAAwNK1wbBaVdsmOTnJI5PsleQJVbXXvN2+meSoJO+Z99zbJPmTJPdLckCSP6mqW2962QAAACxl07SsHpBkVXdf0t1XJ3lfkkPn7tDdq7v7giTXzXvuI5L8U3df0d0/SPJPSQ5agLoBAABYwqYJq3dIcumc+2sm26Yx1XOr6uiqWllVKy+77LIpXxoAAIClapqwWuvZ1lO+/lTP7e5TuntFd6/Yddddp3xpAAAAlqppwuqaJLvPub9bkm9P+fqb8lwAAAC2UtOE1fOS7FlVe1TV9kmOSHLmlK9/TpIDq+rWk4mVDpxsAwAAgBu0wbDa3WuTHJshZH41yfu7+6KqOrGqDkmSqtq/qtYkOTzJW6rqoslzr0jypxkC73lJTpxsAwAAgBu0bJqduvvsJGfP2/bSObfPy9DFd33PfVuSt21CjQAAAGxlpukGDAAAAFuUsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOhMtXQNAADMyvLjz5p1CRtl9UkHz7oEWBK0rAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMzVVitqoOq6uKqWlVVx6/n8R2q6vTJ45+rquWT7dtV1WlV9eWq+mpVvXBhywcAAGAp2mBYraptk5yc5JFJ9kryhKraa95uT0vyg+6+S5LXJnnlZPvhSXbo7n2S7Jfk99YFWQAAALgh07SsHpBkVXdf0t1XJ3lfkkPn7XNoktMmt89I8rCqqiSdZKeqWpbkJkmuTvL/FqRyAAAAlqxpwuodklw65/6aybb17tPda5P8KMnOGYLrfyX5TpJvJnlNd18x/wtU1dFVtbKqVl522WUb/U0AAACwtEwTVms923rKfQ5Icm2S2yfZI8kfVtWd/9uO3ad094ruXrHrrrtOURIAAABL2TRhdU2S3efc3y3Jt29on0mX31smuSLJE5N8uLuv6e7vJfnXJCs2tWgAAACWtmnC6nlJ9qyqPapq+yRHJDlz3j5nJjlycvuwJOd2d2fo+vvQGuyU5P5JvrYwpQMAALBUbTCsTsagHpvknCRfTfL+7r6oqk6sqkMmu701yc5VtSrJc5OsW97m5CQ3S3JhhtD79u6+YIG/BwAAAJaYZdPs1N1nJzl73raXzrl9VYZlauY/78r1bQcAAIBfZppuwAAAALBFCasAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIzOslkXAACwWC0//qxZl7DRVp908KxLAJjKVC2rVXVQVV1cVauq6vj1PL5DVZ0+efxzVbV8zmP7VtVnquqiqvpyVe24cOUDAACwFG0wrFbVtklOTvLIJHsleUJV7TVvt6cl+UF33yXJa5O8cvLcZUneleSY7t47yUOSXLNg1QMAALAkTdOyekCSVd19SXdfneR9SQ6dt8+hSU6b3D4jycOqqpIcmOSC7v63JOnuy7v72oUpHQAAgKVqmrB6hySXzrm/ZrJtvft099okP0qyc5K7JumqOqeqvlBVz9/0kgEAAFjqpplgqdazrafcZ1mSBybZP8lPkny0qs7v7o/+wpOrjk5ydJLc8Y53nKIkAAAAlrJpWlbXJNl9zv3dknz7hvaZjFO9ZZIrJtv/pbu/390/SXJ2kvvO/wLdfUp3r+juFbvuuuvGfxcAAAAsKdOE1fOS7FlVe1TV9kmOSHLmvH3OTHLk5PZhSc7t7k5yTpJ9q+qmkxD74CRfWZjSAQAAWKo22A24u9dW1bEZgue2Sd7W3RdV1YlJVnb3mUnemuSdVbUqQ4vqEZPn/qCq/jxD4O0kZ3f34luQDAAAgC1qmjGr6e6zM3ThnbvtpXNuX5Xk8Bt47rsyLF8DAAAAU5mmGzAAAABsUcIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAoyOsAgAAMDrLZl0AALB5LD/+rFmXsNFWn3TwrEsAYCS0rAIAADA6wioAAACjI6wCAAAwOlOF1ao6qKourqpVVXX8eh7foapOnzz+uapaPu/xO1bVlVX1vIUpGwAAgKVsg2G1qrZNcnKSRybZK8kTqmqvebs9LckPuvsuSV6b5JXzHn9tkg9terkAAABsDaZpWT0gyaruvqS7r07yviSHztvn0CSnTW6fkeRhVVVJUlWPSXJJkosWpmQAAACWumnC6h2SXDrn/prJtvXu091rk/woyc5VtVOSFyR52aaXCgAAwNZimrBa69nWU+7zsiSv7e4rf+kXqDq6qlZW1crLLrtsipIAAABYypZNsc+aJLvPub9bkm/fwD5rqmpZklsmuSLJ/ZIcVlWvSnKrJNdV1VXd/Zdzn9zdpyQ5JUlWrFgxPwgDAACwlZkmrJ6XZM+q2iPJt5IckeSJ8/Y5M8mRST6T5LAk53Z3J/nNdTtU1QlJrpwfVAEAAGC+DYbV7l5bVccmOSfJtkne1t0XVdWJSVZ295lJ3prknVW1KkOL6hGbs2gAAACWtmlaVtPdZyc5e962l865fVWSwzfwGifciPoAAADYCk0zwRIAAABsUcIqAAAAoyOsAgAAMDrCKgAAAKMjrAIAADA6wioAAACjI6wCAAAwOsIqAAAAo7Ns1gUAsHVafvxZsy5ho60+6eBZlwAAWw0tqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoLJt1AQBjtPz4s2ZdwkZZfdLBsy4BAGBBaVkFAABgdIRVAAAARkdYBQAAYHSMWYVFZrGNpUyMpwQAYONpWQUAAGB0hFUAAABGR1gFAABgdIRVAAAARkdYBQAAYHSEVQAAAEZHWAUAAGB0hFUAAABGR1gFAABgdJbNugCWluXHnzXrEjba6pMOnnUJAADAPFtVWF1sQUqIAgAAtla6AQMAADA6wioAAACjI6wCAAAwOsIqAAAAozNVWK2qg6rq4qpaVVXHr+fxHarq9Mnjn6uq5ZPtD6+q86vqy5P/H7qw5QMAALAUbTCsVtW2SU5O8sgkeyV5QlXtNW+3pyX5QXffJclrk7xysv37SR7d3fskOTLJOxeqcAAAAJauaVpWD0iyqrsv6e6rk7wvyaHz9jk0yWmT22ckeVhVVXd/sbu/Pdl+UZIdq2qHhSgcAACApWuasHqHJJfOub9msm29+3T32iQ/SrLzvH0el+SL3f2zG1cqAAAAW4tlU+xT69nWG7NPVe2doWvwgev9AlVHJzk6Se54xztOURIAAABL2TQtq2uS7D7n/m5Jvn1D+1TVsiS3THLF5P5uST6Q5Cnd/R/r+wLdfUp3r+juFbvuuuvGfQcAAAAsOdOE1fOS7FlVe1TV9kmOSHLmvH3OzDCBUpIcluTc7u6qulWSs5K8sLv/daGKBgAAYGnbYFidjEE9Nsk5Sb6a5P3dfVFVnVhVh0x2e2uSnatqVZLnJlm3vM2xSe6S5I+r6kuTf7+y4N8FAAAAS8o0Y1bT3WcnOXvetpfOuX1VksPX87yXJ3n5JtYIAADAVmaabsAAAACwRQmrAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjI6wCgAAwOgIqwAAAIyOsAoAAMDoCKsAAACMjrAKAADA6AirAAAAjM5UYbWqDqqqi6tqVVUdv57Hd6iq0yePf66qls957IWT7RdX1SMWrnQAAACWqg2G1araNsnJSR6ZZK8kT6iqvebt9rQkP+juuyR5bZJXTp67V5Ijkuyd5KAkb5y8HgAAANygaVpWD0iyqrsv6e6rk7wvyaHz9jk0yWmT22ckeVhV1WT7+7r7Z939n0lWTV4PAAAAblB19y/foeqwJAd199Mn938nyf26+9g5+1w42WfN5P5/JLlfkhOSfLa73zXZ/tYkH+ruM+Z9jaOTHD25e7ckF2/6t7ZF7ZLk+7MuYolzjLcMx3nzc4w3P8d483OMtwzHefNzjDc/x3jLWGzH+U7dveuGdlo2xQvVerbNT7g3tM80z013n5LklClqGaWqWtndK2Zdx1LmGG8ZjvPm5xhvfo7x5ucYbxmO8+bnGG9+jvGWsVSP8zTdgNck2X3O/d2SfPuG9qmqZUlumeSKKZ8LAAAAv2CasHpekj2rao+q2j7DhElnztvnzCRHTm4fluTcHvoXn5nkiMlswXsk2TPJ5xemdAAAAJaqDXYD7u61VXVsknOSbJvkbd19UVWdmGRld5+Z5K1J3llVqzK0qB4xee5FVfX+JF9JsjbJ73f3tZvpe5mlRduFeRFxjLcMx3nzc4w3P8d483OMtwzHefNzjDc/x3jLWJLHeYMTLAEAAMCWNk03YAAAANiihFUAAABGR1gFrldVt5jM6M0WUFU3n3UNS1lVHVxVj5t1HQDAjSOssqhU1frW7mUBVNVdkrw5yQEC6+ZXVXdK8t6qWnJroo1BVR2Y5JVJLpt1LUtZVT24qh466zqArUdV3XTWNbDlCKssClV1t6q6Y3e3wLp5dPeqDOsg/16S/QTWze6nST6Z5EVVdZ9ZF7OUVNUjkrwzyZu6+xOTbd43FlhVPTLJm5Lcsap2mHU9bB6TCxL3n3UdW1JV3WHWNbB+kx5J51TVobOuhS1DWN1EVXXfqvrNqtp21rUsVVV1ywzr+B5fVbsLrAurqm5bVTsnSXc/L8m/JzkuQ2DdbqbFLWHd/b0kb0vyiSQvq6r7zrikJaGqDk7yf5J8PMnNquoBSdKmvl9Qk/DyZ0me0t2ndvfPZl0TC29yIe1Pklw161q2hKrarqp2SfKxqrrbrOvhv+vuHyf5yyQn6NWx8NadX1fVr0/yzf+YdU3C6iaoql9N8ugkL09y/6raZs5jwtQC6e4fJfn7JD9MctycFlYXCDZRVe2b5FtJPlJVz62q+3b3y5N8KcnTooV1QVXVgyatUUmS7r73QdBwAAAfjklEQVQsyXuSnJvkj6tq75kVtwRU1R5J/jjJ7yY5Jsktkjxqa2sV2kJ2TvJP3b1yMtb9sKo6rapeWlX7zLo4Nt1kaMgzk3yhu7802bakz226+5ru/n6SzyS5Okl8Bo7HnN+/L0/+vUFgXThVtc3k/Pp/Zliz9c5J3l9Vj5llXcLqjVRVj0ryvgxXls9I8pIkD1gXWNddxZ+82XMjVNVdq2r/qtozycokf53hw+M5VbW8u6+d7PfMqnrmLGtdxL6W4bhul+S3kjyxqv45Q4DdK8nTkxwwu/KWnDskecekm2qS61tY35Ph5OhRVbVsqZ8Qbg6TFtXfTXJ4d5/X3T9I8q4ka5McIrAuuGuS3K2qfjfJh5I8NsP7895Jnul3eElYluHnfJ91fz9LuYdCVd2rqk6fdC+9a5JDkqS71862MtaZBKmDMnxmfixDD5q/mGzjRqqqm1fV9t193aSn3R8keVSSH2Xobfe5Wb6nC6s3wuRE81VJ/rC7r+7uNyT5SJIXJbm+S3BVPT3JW6vqVrOrdnGqqkOS/F2SE5K8Nsnnkvw4ydszfHj+QVVtW1X/K0NLymdnVOqiVFV3r6ozu/vqJM/PML7vZ0leneTPk9wkyY5Jnprkz6tqx5kVu0RUVXX3e5McneTNkyuX67Z/L8l/JLlbd69dyieEm0NVPTzDhcNPdfel696Du/urGQLrtUkOrqrfnGGZi97kAuKKqrpLd38kw3v0/TJ0ZT+xu5+R4YLB3hkuzLCIzOn+d/+q+q0MFzGfn+TzGf5+lvpkcNsm+UKSPZLsmuTVVXXq5N8zZlsac+yf5C+7++0ZQtVJSU6qqofNtqzFaTLU7oVJnlJVO3T35Um+kuTgJH+YYajHd5I8bla9ZoTVjTS5evPWDFeQf7hue3e/NkNgPT7Jr1XV0UlenOTZ3f3D9b0W6zcZY/aqJEd298Hd/agk52XoKnlZkrck+a8kn0ryuiSP6O4vzqrexWYyBunaJNdV1Xsn3axPSbIqQ1D9YnefkuGN6jeSPLG7t4rxSptDVT2iql6R5PTJRZh/ydBifXJVHTQnmG6TZKcyy+FGqWHW37cleXJ3f2TSFfj/q6rtk6S7L85wMWanJA9x4eXGmXMB8WVJXl9Vn05ydncf090vnBznZBgas02G92gWkTmtVm9L8mtJ/i3JPhku+CTJEVW1ZHvadPcXuvuV3f26JE/OMPb9LUnOSvKfMy1uK7aeFr1tkzwySSY97P4lyeUZPlN31qtjo/0kyXczXGQ8fLJt+wzjgh/X3RdP/u5flOHYb3HlAv70quohSV6T4cP6lkmOSPLy7v7snH2Oy3AierMkj+7uC2ZQ6qJWw7qIe3T3ayZXeX422f6mDB+cv5lkRYYPk7/u7i/PrtrFZdJV8lUZWqxXZvhd3qm7H1fDDHsvSrI8yUu6+z9mVedSMTnBf2WSl2b4ILhZhpPAP0pyxwwt2Wcl2SHJgUl+p7svnE21i08NE4D9fxneCx6Uocvvx5L8TXe/Zt6+d0tyxWScMBthcgHxrUme1N3nT7a9McPQgQd39/eqarckByX5/fg9XnQmQ5hulaF75bMzvD+9LsmB3f2dyZCmZyR525wLE0vKpJdLT47F/TO02B08mdDn+sdnWuRWZs7P5MFJbpuhW+q5Sc5O8tXufnZV7Z/hfPyvJ71pmFJVbdvd1056Iz05w+/9Pyf5xww9Ge+Q4TP1sUle2t1nzqROf3fTmVy9PyFDOD27hsmV/leGE8yXd/fn5ux7RJLzu/vfZ1LsIjWni9Fjkuzf3Y+YbN+uu6+ZnJh+IMkx3b1mbpBlwyZv9utOOD832XazDEtP3HROYP3TDBdjnpHkWh/ON05V3SbJ3yZ54boLWlW1e4Y3/d/McHzvluTuSW6f5AzvGRtv0oXpKUkOTXKnDN1R3znn8dsl+W53XzejEhe9qjoswwXEV8+7gHhyhguHv57hd/pJSV4vqC4ONSw3dLPuvnwyTu2/MswEf1WGFpajuvvrVfXEDK1X399aPnOraqckb0zy4u5eM+t6tmY1zBFzQpKTkzwnyRsyTLr5D0n+b5J7JXlOd39wVjUuZpOuvXt19+lVdWSGwHpud/9NVT0hwxCx73X3p2Z1wcYMZ1OY/KG8PENr09lJ0t3frar3ZOju9JKqOrG7z5s89r7ZVbs4TVr8/izJK5J8MMltJ5Mc/OMkqC6b/L9NhiC1Zmv50FxA+yV5Q3d/bt0FgO6+sqqOSfKmqnpPdz+xql6S5CYmldhkyzJ0pbls3Rv8ZDzlPyTZM8l+3f3RDOOx2Qg1TLq2S4Zx1ed39xsm3Xt/J3PGr1fVURl+74+PbqmbYnmSRyR5dXf/bN37R4YTx79Lcrvu/peqWtndjvMiMGlJOSDJ8qq6RYaLDc/MMLHeY5Lcvrt/XMOSWs9P8vXu/tbMCl4gc1rq7pXk27+kp8VVSf5UUJ2tyQWVJyb5n0kekuF9/EM9zNj8gKraNUPvsNVavqc35+/g1zOs/HDPqvppd59WVZ3kwZNj//4e5jZJMrsJ1oxZ3YCqum2GAcZHd/cHq2r7qrpZDQtGr1vr6Z+S/J+q2m+WtS5Wkxa/v0jyjO4+PcOyKZdk6GJ2aDLMxldVh2dogdKNbyPMGb+xbtKIZOgumSSZnFy+IsN4yXd195W6St54VXWXqrpV/3zSpFtOPhSWJUl3fyPDidDjZlnnYjW5sHV6hhPoFye5cHLi+foMPQf+vKruXMMSQc9O8hYBauNNxn7dZnL3bUm+VVWH1rC0wfUXEDOMYbpVcv17CYvAZKzf9zJ0n3xxko/0MIP2kRkmV/nrqvrzDH9Tf9LdK2dW7AKaMy7375LcseYsObjO5ET+2u5eVZbIm7XKMKnmc5M8K8NcJt+qqsdU1QO6+7LuXp0s7ZmqF9rk7+ChGd7bP5bkgiSHVtUTuvsdGcarPyA/P2ecKS2rG/azDH8oP51cuT8+yQMztJisytBl5rQMJ5/fm1WRi9zcFr/tu/uqqjolw0y0h1bVc5J8OsM02k+ahACmNOcN/ANJXlRV+3X3+fXzZZauS/KwDGP/fjqjMpeEqrp1hjF7V1fVHyf5aoYZwR8470T+WxlmXGYjTE4y/zjJcd39L5Ntf5LkzAxjy/6iqq7LMNldJznEGKaNV8NM1SckWV1VX+/ul1TV1zO8T2yT5AMuIC5Ok/OYPXuY6+EnGSam+WSSW1TVvXtYT/V+VfU7Sf5fhvHfn1kqrVY1TMD2igxdnM+/gd22SXLt5P38bVX1ZBditow5LX53TfL9DI1CH8ow0dVju/vfq+qBGcYTP3mGpS5qk0aMFRlmVX53VX0kw6RVT6mqK7v7r6rqdj3MAjxzxqxuwOQH+twMY1P3zjDw+FMZFiN+VoY38g/WZJDy7CpdfOa8Kb0hyY8mJ0SV4ffyusmH6r0yXBz4cpL/aJP+3GiTMTh/lOSmSU7vn0+U8vgMF2EercvTjTPnd7kyTDLzm0l+3N1/VlVvztDd7rgMJ/X3zjBN/OO7+yszK3qRmbTyfT9DAP1gVe3Yk1mqq+qEDF2A75XhIuyTk3xUUN14kwsCL8kw+dc3kvxRdz9p0iXs2AzH+C4ZxjCuu4BoIsFFooaJxg7N0NPmPhnWEr19hr+fHyb5qwx/Q3fs7k/Pqs6FNPf8rKp2SXJSdz99csF2WXdfXVU3n3R7XjfhzK2SvD/Jn3X3x2ZZ/9amhqF3L8kwkdJdMkxS+FsZln372wzvOy80RnXTVNXvZehJ8bgeJlHbOcm7k6xO8vZJA9IoLlJpWd2AyQnoWzK07O2e5B/655NLHJ3k1pP9BNWN9Eta/GrSxeyqGmZ5++jkai+boLv/q6r+KsP4hD+vqvMy9Ag4LMlhguom2TZD1+rq7g9NxoAdX1XXdPcxVfXcDCeDd5rs9yRBdeN09xVV9egM6+l9podJYXbo7p919wmT4QR37e4vVNUb24RKG21yQeDsDCcv/1DDcgUPnVxwuTJDq3Zn+F3+ZobZN11AXFxWJ7lNhvVw/3LSU+l7k/esdbOXPzrDuNVFbV0AnYTP38owod0lSR5eVb/bwzqdV1fVg5I8uqpe0sOY7FtnCKondvcnZ/gtbHWq6tcy9Op4VIZwumuGhorzq+rzGd5//ra7V44lSC0Gcy6o759hXPo/Zpj5+3ZJnldVr0pyiwy9SW+aZN8knxvL8dWyeiNNuj+9IEPriA/rTbCBFr/nZThx+uYMS1xSquomGbpe/48k30nyse7++myrWrwmV+pXJjmghyU8bp/kbzKM+bgyw1T7r5mcBN0yyVpdym68yVjUv0yyort/UD+fLfwfMkyCZymrTVDDmOCXJzkqw1Jtn84wbvGMJJd09xGzq44ba+6JfQ1jvB+dZOcMEye9abL9PklunuS67v7UzIpdADWsV/3hDGPZ/y3D7LEXZxiPe4skj8/wPvJ/MwzdOKG7/76GuQXenWGs+7mzqH1rNCdM3SNDz5h/zXBx7Clzuv5+0WfnjTcZo/qmDEMYb55hrHpnmLzq4CTXZVjl5KEZJoF8foZ2pZkHRWF1I9WwDMLjMyw78fg2Rf+CqGHCqqdlGBM1v8XPMWbUJi1+f5ZhspK/SPJ33X1yDWszP3qy24nd/aMZlbikrCewPiXDCeejjWnfdJOuwGcneVF3nzTZdrMMJ/yP7+7LZ1kfG2dOEHhghhm0fzzp4vf4JA9P8vEMIe63kpw8p3v9om65qqrHZhjickWS47v736rqyRm6QN82wwXyryb5t+4+ZzKMY5sMk+JdMau6tyZzfjd3nPSm2zHDe89eSfbp7ssmIev4DOOMvz3Tghepqrp7houPL+ruC6rqRRmGNr65uz85OQf/SYahAW9O8pgx9f4yG/DG+2GSf09yqBC1cHqYEv/VGa70XJnk0gxj0xxjRq+7/zFDL4ALkvxTd588eeiTGSb7+WmGSdlYAN39oQzjJz9RVc9MckySpwmqC6O7P5xhqZrfnYzdS4Z1N2+a5OobfCKjNAkDB2c4Cb1zkr+qqt/pYfb9D2eYWOVDSb6yLqiue95MCl4g3f2BDGMf759h3pEkeV+GWdr/X4aQ+qp1QbUH1wqqW87kd/MRSU6rqpdn6PH1+gyT5j23qh6T5LUZLqIIqhtpMqxuhwzzaNwjQ6tpuvt/ZzhfOb6qHjI5B98hQyPRqIJqomUVYMFU1cMzLFh+v7mtqFV10+7+yewqW5omE3H8XZL7dPdFs65nqZm0YL86yRsz9Bp4lguIi09VLU/yziRPSfIbGSaNvHmS13b3myZDQ+7U3V+bWZGb0STwvCLJy7v7vTUsR/P4DGHV+8YMVdX9kvzvJH+dYZzkdhkuJHwgw6SEl2YYO3n2Ym/p35LmtFivGyazLMMKG/fPsE7t30z2e1GSD3f3Fyb3b9Ldo1sVQlgFWECTE/zXJfl1V+g3PxcCNi8XBBaneWNUb55hIpVbJzklwwz7j8rP11B99cwK3UJqWI7pT5O8vrtPm3U9JFV1xwwt3R+ZTJJ3ywwtgIdkmIV87gVfQXVKc4LqwRkuUH0ryT9298dqmBh2RZKPd/d75jxnmx7xpIS6AQMsoEkX1ecn+eeq2mYyDorNRFDdvHpYHuJWguriUD9fP7ur6u6T2VVrMonebhnG0/84Q+vVmzNMDrfkdffZSV6W5AVVdft1x4kta93nYVVtn+F38LwkR1bVPbv7R5P3m19Lcs+5zxNUpzf5239khoszr83Qi+LUqjqku0/JMOHYgVV123U/jzEH1cTSNQALrodlPz469g8AmIYLAotDVe2W5HE1rF3+sAxdKz+dZL9JV9gfJnlwVb0kw/qKT+itaAmQ7j6zhmWvLpt1LVujOS1+hyR5Yoblk05M8r0kr6qqkzJ0+71thrlLuBEmFwLummFW5V9LcvcMywG9tqqunUz+uHt3/98ZlrlRdAMGAFjkquouGZZd+VCSXZK8q7s/W1XPT/KkDJOrrEhylwxrV354ZsWyVZrMNH5Skj/s7o9OWrhvk2Ec9TFJPpbkVZPZqreKiyibQw1rBS/LsF7wc7v7i1V1ToZxwfsutgs2ukEAACxikzFnqzK0phww+bddknT3q5Kcm2GCoXO6++Tu/rAhCszAiiR/kmRVVR2eYdbfByd5S4ZJsDqJWX83UXf/IMk1Sf4zyXWTZau+kuRhiy2oJsIqAMCi1t3XTQLrv2dYc/j7SR5UVbed7PKvSa6b9xytVmxpV2fo/vvuJMuTfC3J45L8IMk7MgSqP5sst8Im6O4fZuhO/YcZjve5Y1uSZlq6AQMALAHrZvWsqrtlWK/yh0nOT/LYJCd19z/MtEC2elX1gCRruvsbVXXnDDMCH9Hdl1TVryZZ292Xz7bKxWfeDOBzb98uyQ7dvXqxdq0WVgEAFpGq2jnJr66vpWROYL1zhuVpvpPkFd190WI9WWXxm788ymSipf+d5MUuomycOX/jt0vyo3WT4M09xnP2+W/bZlj6jSKsAgAsElW1Y5IXJLlZknd095fXs8+6E9U9Myw9dN6WrhOSG14jtaqemuSS7v64iyjTqao9kuze3Z+oqkdnWJrmY0m+390vnOwzN5xu293XVtVOGS5uXTKz4jeBMasA/P/t3XuwnWV1x/HvgkAlXAVppWBpcLiJQG2AVmwjg4BglYsy0mKFlkqxIBXCxYIjFBBwpF6YSqeCDkWhILdiGQoVBAVJBaEOGMvEVEuhikws0CIBCcmvfzzvgd1MUDKcs999zv5+/knOzn5n1mRmz+x1fs+zlqRpIskzwFXActqqmq1X8Z7n77Am+ZbDlDQME/trq2qzqpoNz+/9XFW/cXGSr008OqQSp7tdgeuq6hDgrcDRwEXA5t3KqonP/poDjepGwDXA7N6qfplsViVJkqaBgS/9m9D2Jx4KHFlVO67q7d0z69GGLdkQaEpU1Zyqmtc1Su8A7gDOr6pz4YVfngy8f1bXxK5bVVtNx6Opw9alz1cCfwb8FbB+kq8A/0qbpLxBVV0EkGR516huCFwNnJNkYV+1v1w2q5IkSdNA96V/R1qacipwCm2f4v9LWFdKVf4ZeMJjlppCq5v4PTcTEr9hmTgmXVXbJPkS8AFgj6p6S5LngMW0/bXrV9UO3TMb0HYun5Hk9t6KnwQ2q5IkSSNuIBndDHgoyb8luYaWnOwNHFtVO0FLVrpm4CrglCT39VK0ZrxxTvyGpWtU9wcuqqo3dAOpPgJcWFV7dsn0IuCIbpDaGsA7gOOT3NFj6ZPCZlWSJGlEDTSp63R/3gs81qVYJFkALKANXHqqe2Z9Wmp11nRPVTS6xj3xG5aq2h44DZif5NsASb7QvXZ5Ve2dZMXEVOCueb0qyV29FT2JZvVdgCRJklatawb2A95ZVT+gJVYLgLlVtTNwM7A78MEk3+8e2x34UJJ7eilaY2Eg8Tuhqo5L8uUuNb2wqo5McmtVTSR+S1dK/GZEIzUkG9B2094LUFVrJVmW5LKqWgY8t/IDSZ4ddpFTxdU1kiRJI2bg3unvAJ+lDVP6PPB14DxgB+AQYH3g75Nc31uxGktd4vdF4KiJRqp7/T3AJ4E/THLzSs+sPZMaqamw8iqfqtqS9pk/HVjc3fmdB8xN8qlVPTOTmKxKkiSNiKp6LbBGksVVNQuYSxuktDYQ4K+T/Liqfpbkq1U1u0utZuyXVY2ssU78psrAaYo3Ao8l+XRVLQROAO6vqodp94OPGnymn2qnnndWJUmSRsfbgEVVtV137+9B4C+AC4EDkjxYVQcDx3S7VCfuqc3YL6saDatYf/Rj4Nmq2r5bR7OsquZV1fFJrkxymyuTXrqJ/6vueP8ngCdoa6cuT3ImcAuwJbA/cEySW3ordog8BixJktSziS+qXapyNnA4MA94HLiYtrvyi8Brup9PSXJDT+VqTK0i8TsN+DXgfuD5xG9cGqnJVlW7Ae8D7kxySXe64gpgeZJDuvesk+TpPuscJpNVSZKknqVTVXsDK2ip1e20O6lnA68GrqVNV/1IkhtMrTQMJn7D0TWmAXYDfqOq1utOVxwCrFtVE/d/x+ootcmqJEnSCKiqrWjTfQ8DvgMcS1sHsluSh6vqV4AVSZZ4R1XDZOI3tapqa+AI2i8DtqQNqPoccM3AJOWdJ1bXjBOTVUmSpNHwJPCNJHcCP01yNnArbajKtkkeTbIEvKOq4THxG4pX03Yp/znwA9o99T8CDu2GqK0Yx0YVbFYlSZJ6MXC8cnb30lJgu6o6McmK7rWrgbuALXooUWOuS/zOAv4D+BPgN4GDugZqOe3o78kA3c9aDd36H5LcAVxF29RyIu0O8Bm0hvWVfdU3CjwGLEmS1JOqejvty/5twI20ITXfpB2x/E/gvcBhSRZ59FfDVlW/C7wL+F/gU8B2wEeBy2n7fZf2WN60VlW/BNwAPJTkiO61ecCpwCLaXlWSPNFbkSPAZFWSJKkHVbUdcCjwd7Spvx8AtqalV4/TpqyemWQRePRXw2PiNzUGh6Il+RntnuqvVtUF3Wu3A98FNgZ+edwbVTBZlSRJGqruC+vWwL3AWUk+XlWbAXvQ9qxel+SawffbqGpYTPymxsTnuKr2BObQ7qV/qapeQ9uj/Djwt7Tp38clubfHckeGyaokSdIQdVtqvkc76ntSVa2b5BHgq7RpwO+qqs0Hd6/2WK7GgInf1KqqWV2j+jbgM8BPgIur6tQkDwMH09LrY4BP2Ki+wGRVkiRpig2kKtsAGyf5Zvf63wD7ALskeaJbT7NG17xKU87Eb+pU1RzgsST/U1WbA5fSGtItgPOAtYEbk8zv3j+7W1XjaYqOyaokSdIU65qBtwPXAMdW1U1VtU2So4HrgUVVtWG3nsZGVUNh4jflXgs8WFWvTPJD2sC0tYBzkuxM+/89rqpOAZgYWGWj+gKbVUmSpClWVbvS7vrtDVwL/Bbw0araLsnxtBU1b+ixRI2RqprT/XLkuS7xO4nWOD0NLAbeW1WfTPJUkncDf5zkusHjwvrFktwC/AFwb9ew/hewAW0VELTG9QrgGz2VOPI8BixJkjTFqupVwK8DGwIfAw4EPk0btHRYkvu793n8T1OuqvaiTfndKsnjVbUFsAnw+SS7VNUOwHeADyc5t89aZ4Kq2g+4AJgLhPbZnwXsCrwvyR1+9lfNZFWSJGkSDaZPVbVJVW2a5CdJ7gF2p037/SEtUVkKLJt4v19WNQwmfsOV5EbaUeq7aJ/3D9FOWPxptx7Iz/6LmNV3AZIkSTNFVW1KW0FzVVXtSzv6u15VnZbkH4D7gPlVtQZtsNKJSR7orWCNrSQ3VdUxtIZ1Li1JfaqqLsXEb9IlubH7PdZi4PVJru25pGnBY8CSJEmTpKoOB+YB3wb2B+bThqycBZxJW0+zF3AAcFmXuEi96Y6onk+7M70e8Cbgv5N8vdfCZqiq+j1gaZLb+q5lOjBZlSRJmjxX0NZRzAWeSbIQWFhVy2nN6prdWpCruymsplbqlYnfcCW5Abyf/lKZrEqSJE2CgX2Va9PuAx5MG2JzZZJnquog4BzgLcAjflHVKDHx0yiyWZUkSZokAw3rWsARwPbAPcDVXcO6aZIl/VYpvTgTP40Sm1VJkqRJtFLCejiwC7AA+ALtu9eKXguUpGnCO6uSJEmrqapeAazT7ajcjDaQ5lloKyi6hvXZqrqE9n3r7i6tMiWQpJfIZFWSJGk1dGtndgPeSNuTujttBc2Sld43kbDOSvLcxLMmq5L00pisSpIkrYYkK6rqR8CbaQ3rCUmWrNyIDjaqVTUbWNf7qpL00q3RdwGSJEnTRZeqkuQh4AHgVmCHqtp+olGtbg9IVa3ZNaob0aYCb9JT2ZI0LXkMWJIk6RcYTE2r6vXAU8CPgHWAk4H1gNOB9YFtga8lWVZVGwLXAmckub2X4iVpmjJZlSRJ+jmqagvg6Gr2AW4GzgZuAgq4AHgSuBS4E3h6oFH9J+B0G1VJWn0mq5IkST9HVW1La0T/kXaU98okC6rqPGAPYB/gCWBf4Kkkt1fVmsCRwP1JFvRTuSRNbzarkiRJL6K7d7q8qrYBzqcd+/1gkvu6f/84sD/w5iSPrvTsK5I8M/SiJWmG8BiwJEnSixhoVJ+mJaVPA/t2R3xJcjJwA7D1Kp61UZWkl8FkVZIkaSUDO1J3BeYDPwVOoQ1S+ixwC/C5JI/3WKYkzWgmq5IkSQMGGtX9aEd/HwReR2talwFHAQcA768qd9ZL0hQxWZUkSQKqarMkj3R/n01LUC9LclOXsP4+sBZtRc3GwCZJ7u6tYEma4UxWJUnS2KuqAs6sqtcBJFlKW0ezdzdk6Vu0o797Au8HHklyd/ecJGkK2KxKkqSxNnHsN8mRwKuq6uLuny6l7VF9d/fzvwOLgbcCOwLEI2qSNGVsViVJkoDuqO9naGnqBcD9wELgwKq6BbgeOB74F1Yx/VeSNLm8sypJksZeVe0G/CVwUpLvVtUC4B7aUKV1gN8GvgfMAS4C9k3y/Z7KlaSxYLIqSZIEG9GO9x7Y/bwnsBNwSZInk9wMzAY+DBxkoypJU89mVZIkjb0kXwHeCRxWVe9J8gyteZ1TVTt173kAOCTJwh5LlaSx4W4wSZIkIMmXq2oZcFZVrZ3k4qp6U7dzdc0ky5M81nedkjQuvLMqSZI0oKoOAM4F9gIeTbK855IkaSzZrEqSJK2kqjZNsqTvOiRpnNmsSpIkSZJGjgOWJEmSJEkjx2ZVkiRJkjRybFYlSZIkSSPHZlWSJEmSNHJsViVJkiRJI8dmVZIkSZI0cmxWJUmSJEkj5/8AZ4kJmguEGcIAAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Our final feature importance graph indicates that launch angle and launch speed are the most important features. This is exactly what the MLB teams have found <a href="https://www.washingtonpost.com/graphics/sports/mlb-launch-angles-story/?utm_term=.6bc0b872ac59">as well</a></p>
<p><img src="https://i.imgur.com/SKONHYs.gif" alt="img"></p>
<p>You can also see a lot of parks make the top ten with decent sized gini importances. Off the top of my head I would guess the following:</p>
<ul>
<li>Hitter friendly parks: Boston, Houston, Cincinatti, Colorado</li>
<li>Pitcher friendly parks: Detroit and Saint Louis</li>
</ul>
<p>Let's quickly look at the batting averages for a few of those parks.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[148]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Colorado batting average of balls in play:&#39;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">in_play</span><span class="p">[</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;home_team&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;COL&#39;</span><span class="p">][</span><span class="s1">&#39;hit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="mi">3</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Saint Louis batting average of balls in play:&#39;</span><span class="p">,</span><span class="nb">round</span><span class="p">(</span><span class="n">in_play</span><span class="p">[</span><span class="n">in_play</span><span class="p">[</span><span class="s1">&#39;home_team&#39;</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;STL&#39;</span><span class="p">][</span><span class="s1">&#39;hit&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">(),</span><span class="mi">3</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

<div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Colorado batting average of balls in play: 0.377
Saint Louis batting average of balls in play: 0.311
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>There's a pretty dramatic difference there.</p>
<p>So what have we done? We've used machine learning models to predict job performance in the game of baseball. Our original model which included the hit location and the y-coordinate for how far the ball was hit allowed us to achieve almost 94% accuracy and an area under the curve of almost 98% on determining whether a ball in play was a hit or an out across the entire 2019 MLB season.</p>
<p>When we removed both of those features we were still able to achieve an impressive <strong>88% accuracy and 94% area under the curve.</strong></p>
<p>Next steps?</p>
<ul>
<li>Build a model that includes who was on defense as certain teams are better defensively than others. </li>
<li>Build a model to predict what type of hit it will be...perhaps a multi-label approach would make sense here.</li>
</ul>
<h1 id="Takeaways-for-the-I/O-world">Takeaways for the I/O world<a class="anchor-link" href="#Takeaways-for-the-I/O-world">&#182;</a></h1><p>At the surface level this may not seem of value to an I/O practitioner trying to predict job performance or job satisfaction, but the preprocessing, data manipulation, and model building are all identical steps to what you will want to do to ensure you build a good and accurate model, and as I mentioned above, baseball data isn't all that different from organizational data. At the end of the data we are using inputs to predict job performance.</p>

</div>
</div>
</div>
 


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = '//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: 'center'," +
        "    displayIndent: '0em'," +
        "    showMathMenu: true," +
        "    tex2jax: { " +
        "        inlineMath: [ ['$','$'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        " linebreaks: { automatic: true, width: '95% container' }, " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
        "    } " +
        "}); ";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
</div>
	<hr>
	<h2>Comments</h2>
<a href="http://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="@N_KNIG">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'https-nkoenig06-github-io'; 
    var disqus_title = 'Predicting Performance Using Baseball Data';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
		</div>
	</div> 	<!-- <hr> -->
</div> <!-- /container -->
<footer class="aw-footer bg-danger">
	<div class="container"> <!-- footer -->
		<div class="row">
			<div class="col-md-10 col-md-offset-1">
				<div class="row">
					<div class="col-md-3">
						<h4>Navigation</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="">AIO: Bridging the Gap Between Data Science and IO</a></li>
							<li><a href="/feeds/all.atom.xml" type="application/atom+xml"><i class="fa fa-rss "></i> atom</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Author</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://twitter.com/N_KNIG/">Twitter</a></li>
							<li><a href="http://www.linkedin.com/in/nick-koenig-69699a27/">LinkedIn</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Categories</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="/category/about.html">about (1)</a></li>
							<li><a href="/category/data-science.html">data science (15)</a></li>
							<li><a href="/category/programming.html">programming (6)</a></li>
						</ul>
					</div>
					<div class="col-md-3">
						<h4>Links</h4>
						<ul class="list-unstyled my-list-style">
							<li><a href="http://jupyter.org/">Jupyter.org</a></li>
							<li><a href="http://python.org/">Python.org</a></li>
							<li><a href="http://kdnuggets.com/">KDnuggets</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</footer>
<div class="container">
	<div class="row">
		<div class="col-md-12 text-center center-block aw-bottom">
			<p>&copy; N. Koenig 2016</p>
			<p>Powered by Pelican</p>
		</div>
	</div>
</div>
<!-- JavaScript -->
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
jQuery(document).ready(function($) {
	$("div.collapseheader").click(function () {
		$header = $(this).children("span").first();
		$codearea = $(this).children(".input_area");
		$codearea.slideToggle(500, function () {
			$header.text(function () {
				return $codearea.is(":visible") ? "Collapse Code" : "Expand Code";
			});
		});
	});
});
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-132815257-1', 'auto');
  ga('send', 'pageview');

</script>
<a href="https://github.com/NKoenig06"><img style="position: absolute; top: 40px; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="Fork me on GitHub" /></a>
</body>
</html>